{"version":3,"sources":["core.js"],"names":["window","components","petitions","doc","win","numberCommafier","number","toString","replace","progressBar","targetValue","targetGoal","loading","value","step","Math","ceil","guardedTargetVal","max","clearInterval","animate","commafiedNumber","progressbar","setAttribute","getElementById","textContent","isNaN","parseInt","setInterval","handleProgressBarError","requestAPIInfo","apiData","anRequest","XMLHttpRequest","open","apiHost","objectIdentifier","addEventListener","status","JSON","parse","responseText","signatures","goal","location","hostname","querySelector","style","display","send","updateZIPPlaceholder","ZIPLabel","countrySelect","toggleCountryField","countryInput","parentNode","removeChild","classList","add","countryLabel","submitForm","event","compilePayload","tags","util","getReferrerTag","push","formData","FormData","append","org","stringify","href","petitionSignatureForm","action","getAttribute","checked","queryString","source","autoresponderHours","autoresponderActive","content","mothershipTag","document","pathname","preventDefault","signatureSubmission","callbacks","preSubmit","handleSigningError","loadSignatureResponse","FreeProgress","convert","addEventListeners","init","body","getElementsByTagName","dataset","host","petitionId","parseQueryString","whiplist","states","names","politiciansByState","politiciansByName","makeSortable","id","politicians","querySelectorAll","i","length","state","name","indexOf","sort","renderSortElement","div","$c","label","select","option1","option2","className","htmlFor","appendChild","bindSortElementEvents","skipFilter","whip","innerHTML","selectedIndex","targetArr","targetObj","j","filter","renderFilterElement","option","bindFilterElementEvents","filterState","lis","whiplists","PoliticalScoreboardController","Composer","Controller","extend","elements",".internet .filtered",".surveillance .filtered",".unknown .filtered",".team.unknown","events","change select","collection","good","bad","meh","this","render","FilterCollection","model","get","init_list","good_list","bad_list","meh_list","with_bind","maybeHideMehPanel","bind","filterCollection","inject","masterCollection","ListController","track","options","PoliticianController","el","bind_reset","PoliticalScoreboardView","html","refresh","models","meh_panel","remove","click button.tweet_link","click button.info_link","click h4","click .headshot","click .inline_tweet","click .peekaboo",".peekaboo","noGrade","extraInfo","PoliticianView","politician","toJSON","tweet","e","charAt","url","protocol","txt","encodeURIComponent","info","PoliticianModalController","click","target","hidden","BaseShareModalController","show","console","log","overlay","base_render","firstChild","PoliticianModalView","positions","Politician","Model","populateFromGoogle","entry","field","trim","set","first_name","last_name","image","bioguide","email","phone","organization","state_short","shortenState","twitter","party","vote_usaf","vote_tempreauth","office1","office1phone","office1geo","office2","office2phone","office2geo","office3","office3phone","office3geo","office4","office4phone","office4geo","office5","office5phone","office5geo","office6","office6phone","office6geo","office7","office7phone","office7geo","office8","office8phone","office8geo","active","score","score_criteria","fisa_courts_reform_act","s_1551_iosra","fisa_improvements_act","fisa_transparency_and_modernization_act","surveillance_state_repeal_act","usa_freedom_prior_to_20140518","voted_for_conyers_amash_amendment","voted_for_house_version_of_usa_freedom_act_2014","voted_for_massie_lofgren_amendment_2014","whistleblower_protection_for_ic_employees_contractors","first_usaf_cloture_vote","straight_reauth","fisa_reform_act","amendment_1449_data_retention","amendment_1450_extend_implementation_to_1yr","amendment_1451_gut_amicus","final_passage_usaf","s_702_reforms","massie_lofgren_amendment_to_hr2685_defund_702","massie_lofgren_amendment_to_hr4870_no_backdoors","ECPA_reform_cosponsor","house_PCNA","house_NCPA","CISA_cloture_vote","franken_cisa_amendment","wyden_cisa_amendment","heller_cisa_amendment","coons_cisa_amendment","cisa_final","silent","doScore","inc","undefined","grade","key","STATES","hasOwnProperty","Politicians","Collection","sortfn","a","b","PoliticiansFilter","data","container","goodPoliticians","badPoliticians","mehPoliticians","chamberOptGroup","stateOptGroup","allCongress","senate","house","goodHeadline","badHeadline","mehHeadline","goodSubHead","badSubHead","selected","headshot","img","tweetLink","infoLink","rollover","ul","li","block","modal","close","title","voteList","position","position_link","generateSpinner","spinContainer","spinner","blade","subdiv","ref","referrer","pairs","queryObject","search","substr","split","TWEET_BLASTER_URL","SPREADSHEET_URL","DEFAULT_TWEETS","AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY","unfilteredPoliticians","geocode","xhr","onreadystatechange","readyState","res","response","feed","checkIfFinishedWithXHRs","xhr2","initializeScoreboard","renderTopStateSelector","onchange","sbState","UIEvent","view","bubbles","cancelable","dispatchEvent","setTimeout","loadTopPoliticiansByState","onclick","handleTweetSelectorLabels","topPoliticians","hasTweeted","generateTweetTextFromTopPoliticians","senators","release","handleRemainingTweetText","remaining","subdivisions","iso_code","getParameterByName","tweetText","select_one","searchInput","filterByPartialName","levenshteinDistance","str1","str2","Error","distances","min","apply","toLowerCase","distanceThreshold","results","n","filtered","m","fname","match","lname","concat","results_elem","frag","createDocumentFragment","createElement","button","text","createTextNode","cb","br","alreadyBlasted","onhashchange","hash","src","popCallModal","coinToss","random","DONATE_URL","tweeted","CallModalController","headline","campaign","cta","callScript","shareText","onDomContentLoaded","alert","pollTimer","closed","random_tweet","floor","validatePhone","CallScriptModalController","callHeadline","callInstruction","expandArticle","viewMoreLinks","getElementsByClassName","links","tableLinks","corporateScoreboard","disabled","form","thanks","removeAttribute"],"mappings":"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","file":"core.js","sourcesContent":["/*\n @licstart  The following is the entire license notice for the\n    JavaScript code in this page.\n\n Copyright (C) 2015 Fight for the Future\n Copyright (C) 2015 Zaki Manian\n\n The JavaScript code in this page is free software: you can\n redistribute it and/or modify it under the terms of the GNU\n General Public License (GNU GPL) as published by the Free Software\n Foundation, either version 3 of the License, or (at your option)\n any later version. The code is distributed WITHOUT ANY WARRANTY;\n without even the implied warranty of MERCHANTABILITY or FITNESS\n FOR A PARTICULAR PURPOSE. See the GNU GPL for more details.\n\n As additional permission under GNU GPL version 3 section 7, you\n may distribute non-source (e.g., minimized or compacted) forms of\n that code without the copy of the GNU GPL normally required by\n section 4, provided you include this license notice and a URL\n through which recipients can access the Corresponding Source.\n\n @licend  The above is the entire license notice\n    for the JavaScript code in this page.\n*/\nwindow.components = window.components || {};\nwindow.components.petitions = function (doc, win) {\n  /**\n   * Retrieves petition data from Action Network API, then submits signature\n   * @param {object} doc - Document object\n   * @param {object} win - Window object\n   * */\n  \"use strict\";\n\n  var\n    body = doc.getElementsByTagName('body')[0],\n    petitionSignatureForm = doc.getElementById('petition-form'),\n    apiHost = petitionSignatureForm.dataset.host,\n    objectIdentifier = petitionSignatureForm.dataset.petitionId,\n    submitButton = body.querySelector('[type=\"submit\"]'),\n    countryInput = doc.getElementById('hidden-country'),\n    countrySelect = doc.getElementById('select-country'),\n    countryLabel = doc.querySelector('[for=\"select-country\"]'),\n    queryString = win.util.parseQueryString();\n\n  function numberCommafier(number) {\n    /**\n     * Returns a string representing a number with commas\n     * @param {int} number - the number to transform\n     * */\n\n    return number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n  }\n\n  function progressBar(targetValue, targetGoal) {\n    /**\n     * Animates the value of a progress bar\n     * @param {int} targetValue - the target value attribute of the progress bar\n     * @param {int} targetGoal - the target max attribute of the progress bar\n     * */\n\n    var\n      guardedTargetVal = targetValue.isNaN ? 0 : targetValue,\n      animate,\n      value = 0,\n      progressbar = doc.getElementById('signatures-progress-bar'),\n      max = parseInt(targetGoal),\n      step = (guardedTargetVal / 1500) * 30; // 1500 ms total, 30ms minimum\n                                             // interval\n\n    if (!progressbar)\n      return false;\n\n    function loading() {\n      value += step;\n      value = Math.ceil(value);\n      if (value >= guardedTargetVal || value >= max) {\n        value = guardedTargetVal;\n        clearInterval(animate);\n      }\n\n      var\n        commafiedNumber = numberCommafier(value);\n\n      progressbar.setAttribute('max', max.toString(10));\n      progressbar.setAttribute('value', value.toString(10));\n      progressbar.setAttribute('title', commafiedNumber + ' signatures');\n      doc.getElementById('total-sigs').textContent = commafiedNumber;\n      doc.getElementById('sigs-to-go').textContent = numberCommafier(targetGoal - value) + ' needed to reach ' + numberCommafier(targetGoal);\n      progressbar.textContent = commafiedNumber + ' signatures';\n    }\n\n    animate = setInterval(function () {\n      loading();\n    }, 30);\n  }\n\n  function handleProgressBarError() {\n    /**\n     * Sets values for the progress bar even if there's a server or XHR error\n     * */\n    progressBar(1519, 2500);\n  }\n\n  function requestAPIInfo() {\n    /**\n     * Builds and sends request to API server\n     * */\n    var\n      apiData,\n      anRequest = new XMLHttpRequest();\n\n    anRequest.open('GET', apiHost + '/petition?identifier=' + objectIdentifier, true);\n    anRequest.addEventListener('load', function () {\n      if (anRequest.status >= 200 && anRequest.status < 400) {\n\n          apiData = JSON.parse(anRequest.responseText);\n\n        progressBar(apiData.signatures, apiData.goal);\n\n        // remove this after save-chelsea has > 1000 signatures\n        if (win.location.hostname === 'www.freechelsea.com' && apiData.signatures < 1000) {\n          doc.querySelector('.signatures').style.display = 'none';\n        }\n\n      } else {\n        handleProgressBarError();\n      }\n    });\n    anRequest.addEventListener('error', handleProgressBarError);\n    anRequest.send();\n  }\n\n  function updateZIPPlaceholder() {\n    /**\n     * Updates placeholder on ZIP/Post Code field to be appropriate for country\n     * selected\n     * */\n    var\n      ZIPLabel = doc.getElementById('form-zip_code');\n\n    if (countrySelect.value !== 'US') {\n      ZIPLabel.setAttribute('placeholder', 'Post Code');\n    } else {\n      ZIPLabel.setAttribute('placeholder', 'ZIP');\n    }\n  }\n\n  function toggleCountryField() {\n    /**\n     * Hides the label and shows the select when someone changes their signature\n     * country.\n     * */\n\n    countryInput.parentNode.removeChild(countryInput);\n    countrySelect.setAttribute('name', 'signature[country]');\n    countrySelect.classList.add('visible');\n    countryLabel.classList.add('hidden');\n  }\n\n  function submitForm(event) {\n    /**\n     * Submits the form to ActionNetwork. If the script doesn’t, by now, know\n     * the action_network identifier, default isn’t prevented on the event and\n     * form submission proceeds as normal.\n     * @param {event} event - Form submission event\n     * */\n\n    if (objectIdentifier) {\n      event.preventDefault();\n    }\n\n    var\n      signatureSubmission = new XMLHttpRequest();\n\n    win.callbacks.petitions.preSubmit();\n\n    function compilePayload() {\n      /**\n       * Compiles the form data into a JSON payload for Ajax submission\n       * @return {object} petitionFormData - just the info the API needs\n       * */\n      var tags = JSON.parse(doc.querySelector('[name=\"subscription[tag_list]\"]').value);\n      if (util.getReferrerTag())\n        tags.push(util.getReferrerTag());\n\n      var formData = new FormData();\n      formData.append('guard', '');\n      formData.append('hp_enabled', true);\n      formData.append('org', window.org ? window.org : 'fftf');\n      formData.append('an_tags', JSON.stringify(tags));\n      formData.append('an_url', win.location.href);\n      formData.append('an_petition', petitionSignatureForm.action.replace('/signatures', ''));\n      formData.append('member[first_name]', doc.getElementById('form-first_name').value);\n      formData.append('member[email]', doc.getElementById('form-email').value);\n      formData.append('member[postcode]', doc.getElementById('form-zip_code').value);\n      formData.append('member[country]', countrySelect.value);\n\n      if (doc.getElementById('opt-in') && doc.getElementById('opt-in').getAttribute('type') === 'checkbox' && doc.getElementById('opt-in').checked === false) {\n        formData.append('opt_out', true);\n      }\n\n      if (doc.getElementById('form-street_address')) {\n        formData.append('member[street_address]', doc.getElementById('form-street_address').value);\n      }\n\n      if (doc.getElementById('form-phone_number')) {\n        formData.append('member[phone_number]', doc.getElementById('form-phone_number').value);\n      }\n\n      if (doc.getElementById('form-comments')) {\n        formData.append('action_comment', doc.getElementById('form-comments').value);\n      }\n\n      if (queryString.source) {\n        formData.append('subscription[source]', queryString.source);\n      }\n\n      var autoresponderHours = doc.querySelector('meta[name=\"autoresponder_hours\"]'),\n          autoresponderActive = doc.querySelector('meta[name=\"autoresponder_active\"]');\n      formData.append('autoresponder_hours', autoresponderHours ? autoresponderHours.content : 72);\n\n      if (autoresponderActive)\n        formData.append('autoresponder_active', 1);\n\n      var mothershipTag = document.querySelector('input[name=\"_mothership_tag\"]');\n      if (mothershipTag && mothershipTag.value)\n        formData.append('tag', mothershipTag.value);\n      else\n        formData.append('tag', window.location.pathname);\n\n      return formData;\n    }\n\n    signatureSubmission.open('POST', 'https://queue.fightforthefuture.org/action', true);\n    // signatureSubmission.open('POST', 'http://localhost:9001/action', true); // JL DEBUG ~\n    signatureSubmission.addEventListener('error', win.callbacks.petitions.handleSigningError);\n    signatureSubmission.addEventListener('load',  win.callbacks.petitions.loadSignatureResponse);\n    signatureSubmission.send(compilePayload());\n\n    if (typeof FreeProgress !== \"undefined\")\n      FreeProgress.convert();\n  }\n\n  function addEventListeners() {\n    /**\n     * Attaches all the listeners all the places\n     * */\n    countryLabel.addEventListener('click', toggleCountryField);\n    countrySelect.addEventListener('change', updateZIPPlaceholder);\n    petitionSignatureForm.addEventListener('submit', submitForm);\n  }\n\n  function init() {\n    requestAPIInfo();\n    addEventListeners();\n  }\n\n  init();\n};\n\n;window.components = window.components || {};\nwindow.components.whiplist = function (doc, win) {\n  \"use strict\";\n\n  var states = {};\n  var names = {};\n  var politiciansByState = {};\n  var politiciansByName = {};\n\n  var makeSortable = function(id) {\n\n    // make sure our IDs are tracked properly\n    states[id] = [];\n    names[id] = []\n    politiciansByState[id] = {};\n    politiciansByName[id] = {};\n\n\n    var politicians = doc.getElementById(id).querySelectorAll('li');\n\n    for (var i=0; i<politicians.length; i++) {\n      var state = politicians[i].querySelector('input[name=\"state\"]').value;\n      var name  = politicians[i].querySelector('input[name=\"lastname\"]').value;\n\n      if (states[id].indexOf(state) === -1)\n        states[id].push(state);\n\n      if (names[id].indexOf(name) === -1)\n        names[id].push(name);\n\n      if (typeof politiciansByState[id][state] === \"undefined\")\n        politiciansByState[id][state] = [politicians[i]];\n      else\n        politiciansByState[id][state].push(politicians[i]);\n\n      if (typeof politiciansByName[id][name] === \"undefined\")\n        politiciansByName[id][name] = [politicians[i]];\n      else\n        politiciansByName[id][name].push(politicians[i]);\n    }\n    states[id] = states[id].sort();\n    names[id] = names[id].sort();\n  }\n\n  var renderSortElement = function(id) {\n    var div     = $c('div'),\n        label   = $c('label'),\n        select  = $c('select'),\n        option1 = $c('option'),\n        option2 = $c('option');\n\n    div.className = 'sort';\n\n    label.htmlFor = 'order_' + id;\n    label.textContent = 'Sort by: ';\n\n    select.id = 'order_' + id;\n\n    option1.value = 'name';\n    option1.textContent = 'Name';\n    select.appendChild(option1);\n\n    option2.value = 'state';\n    option2.textContent = 'State';\n    select.appendChild(option2);\n\n    div.appendChild(label);\n    div.appendChild(select);\n\n    doc.getElementById('sort_' + id).appendChild(div);\n  }\n\n  var bindSortElementEvents = function(id) {\n    doc.getElementById('order_' + id).addEventListener('change', function() {\n      sort(id);\n    });\n  }\n\n  var sort = function(id, skipFilter) {\n    var whip = doc.getElementById(id);\n    var sort = doc.getElementById('order_' + id);\n\n    whip.innerHTML = '';\n\n    if (sort[sort.selectedIndex].value == 'state') {\n      var targetArr = states[id];\n      var targetObj = politiciansByState[id];\n    } else if (sort[sort.selectedIndex].value == 'name') {\n      var targetArr = names[id];\n      var targetObj = politiciansByName[id];\n    }\n\n    for (var i=0; i<targetArr.length; i++)\n      for (var j=0; j<targetObj[targetArr[i]].length; j++)\n        whip.appendChild(targetObj[targetArr[i]][j]);\n\n    if (!skipFilter)\n      filter(id);\n  }\n\n  var renderFilterElement = function(id) {\n    var div     = $c('div'),\n        label   = $c('label'),\n        select  = $c('select'),\n        option1 = $c('option');\n\n    div.className = 'filter';\n\n    label.htmlFor = 'filter_' + id;\n    label.textContent = 'Show state: ';\n\n    select.id = 'filter_' + id;\n\n    option1.value = '';\n    option1.textContent = '(all states)';\n    select.appendChild(option1);\n\n    for (var i=0; i<states[id].length; i++) {\n      var option = $c('option');\n      option.value = states[id][i];\n      option.textContent = states[id][i];\n      select.appendChild(option);\n    }\n\n    div.appendChild(label);\n    div.appendChild(select);\n\n    doc.getElementById('sort_' + id).appendChild(div);\n  }\n\n  var bindFilterElementEvents = function(id) {\n\n    doc.getElementById('filter_' + id).addEventListener('change', function() {\n      filter(id);\n    });\n  }\n\n  var filter = function(id) {\n    var whip = doc.getElementById(id);\n    var filter = doc.getElementById('filter_' + id);\n\n    sort(id, true);\n\n    if (filter.selectedIndex == 0)\n      return;\n\n    var filterState = filter[filter.selectedIndex].value,\n        lis         = whip.querySelectorAll('li');\n\n    for (var i=0; i<lis.length; i++) {\n      var state = lis[i].querySelector('input[name=\"state\"]').value;\n\n      if (state != filterState) {\n        whip.removeChild(lis[i]);\n      }\n    }\n  }\n\n  var init = function() {\n    var whiplists = document.querySelectorAll('.whip');\n\n    for (var i=0; i<whiplists.length; i++) {\n      var id = whiplists[i]['id'];\n      if (doc.getElementById('sort_' + id)) {\n\n        makeSortable(id);\n\n        renderFilterElement(id);\n        bindFilterElementEvents(id);\n\n        renderSortElement(id);\n        bindSortElementEvents(id);\n      }\n    }\n  }\n\n  init();\n};\n\n;var PoliticalScoreboardController = Composer.Controller.extend({\n    elements: {\n        '.internet .filtered': 'good_list',\n        '.surveillance .filtered': 'bad_list',\n        '.unknown .filtered': 'meh_list',\n        '.team.unknown': 'meh_panel',\n        'select': 'select'\n    },\n\n    events: {\n        'change select': 'filter'\n    },\n\n    collection: null,\n    good: null,\n    bad: null,\n    meh: null,\n\n    init: function() {\n        this.render();\n\n        this.good = new Composer.FilterCollection(this.collection, {\n            filter: function(model) {\n                return model.get('score') >= 6 && model.get('active') !== 'No';\n            }\n        });\n        this.init_list(this.good, this.good_list);\n\n        this.bad = new Composer.FilterCollection(this.collection, {\n            filter: function(model) {\n                return model.get('score') < 0 && model.get('active') !== 'No';\n            }\n        });\n        this.init_list(this.bad, this.bad_list);\n\n        this.meh = new Composer.FilterCollection(this.collection, {\n            filter: function(model) {\n                return model.get('score') >= 0 && model.get('score') <= 5 && model.get('active') !==     'No';\n            }\n        });\n        this.init_list(this.meh, this.meh_list);\n\n        // hide the \"unclear\" section if no politicians in it\n        this.with_bind(this.meh, 'reset', this.maybeHideMehPanel.bind(this));\n\n        this.maybeHideMehPanel();\n    },\n\n    init_list: function(filterCollection, inject) {\n\n        var masterCollection = this.collection;\n\n        new Composer.ListController({\n            collection: filterCollection,\n            inject: inject,\n            init: function() {\n                this.track(this.collection, function(model, options) {\n                    return new PoliticianController({\n                        inject: this.el,\n                        model: model,\n                        masterCollection: masterCollection\n                    });\n                }.bind(this), {bind_reset: true})\n            }\n        });\n    },\n\n    render: function() {\n        var div = PoliticalScoreboardView({state: this.collection.state});\n        this.html(div);\n    },\n\n    filter: function() {\n        var state = this.select.options[this.select.selectedIndex].value;\n\n        this.collection.state = state;\n        this.collection.refresh();\n    },\n\n    maybeHideMehPanel: function() {\n        if (this.meh.models().length == 0) {\n            this.meh_panel.classList.add('hidden');\n        } else {\n            this.meh_panel.classList.remove('hidden');\n        }\n    }\n});\n\n;var PoliticianController = Composer.Controller.extend({\n\n    events: {\n        'click button.tweet_link': 'tweet',\n        'click button.info_link': 'info',\n        'click h4': 'tweet',\n        'click .headshot': 'tweet',\n        'click .inline_tweet': 'tweet',\n        'click .peekaboo': 'click'\n    },\n\n    elements: {\n        '.peekaboo': 'hidden'\n    },\n\n    model: null,\n    noGrade: false,\n    extraInfo: false,\n    masterCollection: null,\n\n    init: function () {\n        this.render();\n    },\n\n    render: function () {\n\n        if (this.masterCollection && this.masterCollection.state)\n            var state = this.masterCollection.state;\n        else\n            var state = null;\n\n        var div = PoliticianView({\n            state: state,\n            politician: this.model.toJSON(),\n            noGrade: this.noGrade,\n            extraInfo: this.extraInfo\n        });\n\n        this.html(div);\n\n        if (state == 'all' || state == 'senate' || state == 'house')\n            this.el.className = 'block';\n        else\n            this.el.className = 'politician';\n    },\n\n    tweet: function (e) {\n        e.preventDefault();\n\n        var name = this.model.get('twitter');\n        if (name) {\n            // name = '@' + name;\n            name = '.@' + name;\n        } else {\n            if (this.model.get('organization') == 'House')\n                name = 'Rep. ' + this.model.get('last_name');\n            else\n                name = 'Sen. ' + this.model.get('last_name');\n        }\n        if (this.model.get('grade').charAt(0) == 'A' || this.model.get('grade').charAt(0) == 'F')\n            var article = 'an';\n        else\n            var article = 'a';\n\n        var url = window.location.protocol + '//' + window.location.host + '?politician='+ this.model.get('bioguide');\n\n        // var txt = encodeURIComponent('Here\\'s why '+name+' got '+article+' '+this.model.get('grade')+' on surveillance: '+url+' #StopCISA');\n        var txt = encodeURIComponent(name+' Let S. 702 of F.A.A. lapse - NSA & FBI killing our privacy. #Sunset702 #NoBackdoorSearches '+url);\n        window.open('https://twitter.com/intent/tweet?text=' + txt);\n    },\n\n    info: function (e) {\n        if (e)\n            e.preventDefault();\n\n        new PoliticianModalController({model: this.model});\n    },\n\n    click: function(e) {\n        if (e)\n            e.preventDefault();\n\n        if (e.target && this.hidden && e.target == this.hidden)\n            this.info();\n    }\n});\n\n;var PoliticianModalController = BaseShareModalController.extend({\n\n    init: function() {\n        this.render();\n        this.show();\n        console.log(this.model.toJSON());\n    },\n\n    render: function() {\n        var overlay = this.base_render();\n\n        overlay.firstChild.appendChild(PoliticianModalView({\n            positions: this.model.get('score_criteria'),\n            name: this.model.get('first_name') +\" \"+ this.model.get('last_name')\n\n        }));\n\n        this.html(overlay);\n    }\n});\n\n;/**\n    Politician Model\n**/\nvar Politician = Composer.Model.extend({\n    populateFromGoogle: function(entry) {\n\n        var e = function(field) { return entry['gsx$'+field]['$t'].trim(); };\n\n        this.set({\n            first_name:      e('first'),\n            last_name:       e('name'),\n            image:           e('imagepleasedontedit'),\n            bioguide:        e('bioguide'),\n            email:           e('email'),\n            phone:           e('phone'),\n            organization:    e('organization'),\n            state:           e('state'),\n            state_short:     this.shortenState(e('state')),\n            twitter:         e('twitter'),\n            party:           e('partyaffiliation'),\n            vote_usaf:       e('voteusaf'),\n            vote_tempreauth: e('votetempreauth'),\n            office1:         e('office1'),\n            office1phone:    e('office1phone'),\n            office1geo:      e('office1geo'),\n            office2:         e('office2'),\n            office2phone:    e('office2phone'),\n            office2geo:      e('office2geo'),\n            office3:         e('office3'),\n            office3phone:    e('office3phone'),\n            office3geo:      e('office3geo'),\n            office4:         e('office4'),\n            office4phone:    e('office4phone'),\n            office4geo:      e('office4geo'),\n            office5:         e('office5'),\n            office5phone:    e('office5phone'),\n            office5geo:      e('office5geo'),\n            office6:         e('office6'),\n            office6phone:    e('office6phone'),\n            office6geo:      e('office6geo'),\n            office7:         e('office7'),\n            office7phone:    e('office7phone'),\n            office7geo:      e('office7geo'),\n            office8:         e('office8'),\n            office8phone:    e('office8phone'),\n            office8geo:      e('office8geo'),\n            active:          e('active'),\n\n            // meta field\n            score: 0,\n            score_criteria: [],\n\n            // scorecard fields\n            fisa_courts_reform_act:                                 e('fisacourtsreformact'),\n            s_1551_iosra:                                           e('s1551iosra'),\n            fisa_improvements_act:                                  e('fisaimprovementsact'),\n            fisa_transparency_and_modernization_act:                e('fisatransparencyandmodernizationact'),\n            surveillance_state_repeal_act:                          e('surveillancestaterepealact'),\n            usa_freedom_prior_to_20140518:                          e('usafreedompriorto2014-05-18'),\n            voted_for_conyers_amash_amendment:                      e('votedforconyersamashamendment'),\n            voted_for_house_version_of_usa_freedom_act_2014:        e('votedforhouseversionofusafreedomact2014'),\n            voted_for_massie_lofgren_amendment_2014:                e('votedformassielofgrenamendment2014'),\n            whistleblower_protection_for_ic_employees_contractors:  e('whistleblowerprotectionforicemployeescontractors'),\n            first_usaf_cloture_vote:                                e('stusafcloturevote'),\n            straight_reauth:                                        e('straightreauth'),\n            fisa_reform_act:                                        e('fisareformact'),\n            amendment_1449_data_retention:                          e('amendment1449dataretention'),\n            amendment_1450_extend_implementation_to_1yr:            e('amendment1450extendimplementationto1yr'),\n            amendment_1451_gut_amicus:                              e('amendment1451gutamicus'),\n            final_passage_usaf:                                     e('finalpassageusaf'),\n            s_702_reforms:                                          e('reforms'),\n            massie_lofgren_amendment_to_hr2685_defund_702:          e('massielofgrenamendmenttohr2685defund702'),\n            massie_lofgren_amendment_to_hr4870_no_backdoors:        e('massielofgrenamendmenttohr4870nobackdoors'),\n            ECPA_reform_cosponsor:e('ecpareformcosponsor'),\n            house_PCNA:e('housepcna'),\n            house_NCPA:e('housencpaa'),\n            ECPA_reform_cosponsor:e('ecpareformcosponsor'),\n            CISA_cloture_vote:e('cisacloture'),\n            franken_cisa_amendment:e('frankencisaamendment'),\n            wyden_cisa_amendment:e('wydencisaamendment'),\n            heller_cisa_amendment:e('hellercisaamendment'),\n            coons_cisa_amendment:e('coonscisaamendment'),\n            coons_cisa_amendment:e('cottoncisaamendment'),\n            cisa_final:e('cisafinal')\n        }, {silent: true});\n        this.doScore();\n    },\n\n    doScore: function() {\n        var score = 0;\n        var score_criteria = [];\n\n        if (this.get('fisa_courts_reform_act') == 'X') {\n            var inc = 3;\n            score_criteria.push({\n                score:  inc,\n                info:   'Supported the FISA Courts Reform Act',\n                url: 'http://www.ibtimes.com/nsa-fisa-surveillance-obama-likely-back-secret-court-reform-senator-says-1368781'\n            });\n            score += inc;\n        }\n        if (this.get('s_1551_iosra') == 'X') {\n            var inc = 4;\n            score_criteria.push({\n                score:  inc,\n                info:   'Supported the Intelligence Oversight and Surveillance Reform Act',\n                url:   'https://cdt.org/blog/bills-offer-clear-choice-end-bulk-collection-of-americans%E2%80%99-data-or-endorse-it/'\n            });\n            score += inc;\n        }\n        if (this.get('fisa_improvements_act') == 'X') {\n            var inc = -4;\n            score_criteria.push({\n                score:  inc,\n                info:   'Supported the FISA Improvements Act',\n                url:'http://www.theguardian.com/world/2013/nov/15/feinstein-bill-nsa-warrantless-searches-surveillance'\n            });\n            score += inc;\n        }\n        if (this.get('fisa_transparency_and_modernization_act') == 'X') {\n            var inc = -4;\n            score_criteria.push({\n                score:  inc,\n                info:   'Supported the FISA Transparency and Modernization Act',\n                url:'https://www.eff.org/deeplinks/2014/04/nsa-reform-bill-intelligence-community-written-intelligence-community-and'\n            });\n            score += inc;\n        }\n        if (this.get('surveillance_state_repeal_act') == 'X') {\n            var inc = 4;\n            score_criteria.push({\n                score:  inc,\n                info:   'Supported the Surveillance State Repeal Act',\n                url:'http://www.restorethe4th.com/blog/go-big-or-go-home-pass-the-new-surveillance-state-repeal-act/'\n            });\n            score += inc;\n        }\n        if (this.get('usa_freedom_prior_to_20140518') == 'X') {\n            var inc = 2;\n            score_criteria.push({\n                score:  inc,\n                info:   'Supported the original USA Freedom Act (prior to May 18th, 2014)',\n                url:' https://www.eff.org/deeplinks/2014/07/new-senate-usa-freedom-act-first-step-towards-reforming-mass-surveillance'\n            });\n            score += inc;\n        }\n        if (this.get('voted_for_conyers_amash_amendment') == 'X') {\n            var inc = 4;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted for Conyers Amash Amendment',\n                url: ' http://americablog.com/2013/07/amash-conyers-anti-nsa-amendment-lost-by-12-votes-205-217.html'\n            });\n            score += inc;\n        }\n        if (this.get('voted_for_house_version_of_usa_freedom_act_2014') == 'X') {\n            var inc = -2;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted for gutted House version of USA Freedom Act of 2014',\n                url: 'https://www.eff.org/deeplinks/2014/05/eff-dismayed-houses-gutted-usa-freedom-act'\n            });\n            score += inc;\n        }\n        if (this.get('voted_for_massie_lofgren_amendment_2014') == 'X') {\n            var inc = 3;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted for Massie-Lofgren Amendment (2014)',\n                url:' http://www.huffingtonpost.com/2014/12/10/nsa-surveillance-spending-bill_n_6304834.html'\n            });\n            score += inc;\n        }\n        if (this.get('whistleblower_protection_for_ic_employees_contractors') == 'X') {\n            var inc = 4;\n            score_criteria.push({\n                score:  inc,\n                info:   'Supported whistleblower protection measures for Intelligence employees and contractors',\n                url:'http://whistleblower.org/blog/121230-49-orgs-call-congress-restore-whistleblower-rights-intelligence-contractors'\n            });\n            score += inc;\n        }\n        if (this.get('first_usaf_cloture_vote') == 'GOOD') {\n            var inc = 4;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted NO on reauthorizing the PATRIOT Act *and* NO on cloture for the first Senate USA Freedom Act',\n                url:'http://www.thewhir.com/web-hosting-news/senate-votes-to-invoke-cloture-on-usa-freedom-act-advancing-it-to-an-amendment-process'\n\n            });\n            score += inc;\n        }\n        else if (this.get('first_usaf_cloture_vote') == 'OK') {\n            var inc = -1;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted NO on reauthorizing the PATRIOT Act *and* YES on cloture for the first Senate USA Freedom Act',\n                url:'http://www.thewhir.com/web-hosting-news/senate-votes-to-invoke-cloture-on-usa-freedom-act-advancing-it-to-an-amendment-process'\n            });\n            score += inc;\n        }\n        else if (this.get('first_usaf_cloture_vote') == 'BAD') {\n            var inc = -4;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted YES on reauthorizing the PATRIOT Act and NO on the first USA Freedom Act cloture vote',\n                url:'http://thehill.com/policy/national-security/242173-mcconnell-introduces-short-term-nsa-bill'\n            });\n            score += inc;\n        }\n        if (this.get('straight_reauth') == 'GOOD') {\n            var inc = 3;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted NO on reauthorizing the PATRIOT Act',\n                url:'http://thehill.com/policy/national-security/242173-mcconnell-introduces-short-term-nsa-bill'\n            });\n            score += inc;\n        }\n        else if (this.get('straight_reauth') == 'BAD') {\n            var inc = -3;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted YES on reauthorizing the PATRIOT Act',\n                url:'https://cdt.org/insight/oppose-senator-feinsteins-fisa-reform-act-of-2015/'\n            });\n            score += inc;\n        }\n        if (this.get('fisa_reform_act') == 'X') {\n            var inc = -3;\n            score_criteria.push({\n                score:  inc,\n                info:   'Supported the FISA Reform Act',\n                url:'https://www.eff.org/deeplinks/2015/06/eff-opposes-amendments-weakening-usa-freedom-act'\n            });\n            score += inc;\n        }\n        if (this.get('amendment_1449_data_retention') == 'GOOD') {\n            var inc = 1;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted NO on USA Freedom data retention amendment (1449)',\n                url: 'https://www.eff.org/deeplinks/2015/06/eff-opposes-amendments-weakening-usa-freedom-act'\n            });\n            score += inc;\n        }\n        else if (this.get('amendment_1449_data_retention') == 'BAD') {\n            var inc = -3;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted YES on USA Freedom data retention amendment (1449)',\n                url: 'https://www.eff.org/deeplinks/2015/06/eff-opposes-amendments-weakening-usa-freedom-act'\n            });\n            score += inc;\n        }\n        if (this.get('amendment_1450_extend_implementation_to_1yr') == 'GOOD') {\n            var inc = 1;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted NO on amendment 1450 extending implementation of USA Freedom Act by 1 year',\n                url:'https://www.eff.org/deeplinks/2015/06/eff-opposes-amendments-weakening-usa-freedom-act'\n            });\n            score += inc;\n        }\n        else if (this.get('amendment_1450_extend_implementation_to_1yr') == 'BAD') {\n            var inc = -2;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted YES on amendment 1450 extending implementation of USA Freedom Act by 1 year',\n                url:'https://www.eff.org/deeplinks/2015/06/eff-opposes-amendments-weakening-usa-freedom-act'\n            });\n            score += inc;\n        }\n        if (this.get('amendment_1451_gut_amicus') == 'GOOD') {\n            var inc = 1;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted NO on amendment 1451 to gut amicus proceedings',\n                url: 'https://www.eff.org/deeplinks/2015/06/eff-opposes-amendments-weakening-usa-freedom-act'\n            });\n            score += inc;\n        }\n        else if (this.get('amendment_1451_gut_amicus') == 'BAD') {\n            var inc = -3;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted YES on amendment 1451 to gut amicus proceedings',\n                url: 'https://www.eff.org/deeplinks/2015/06/eff-opposes-amendments-weakening-usa-freedom-act'\n            });\n            score += inc;\n        }\n        if (this.get('final_passage_usaf') == 'GOOD') {\n            var inc = 4;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted NO on USA Freedom Act (final passage)',\n                url:\"http://www.restorethe4th.com/blog/most-reps-voting-for-usa-freedom-were-opponents-of-surveillance-reform/\"\n            });\n            score += inc;\n        }\n        else if (this.get('final_passage_usaf') == 'OK') {\n            var inc = -1;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted YES on reforming bulk collection via USAF',\n                url:'https://www.eff.org/deeplinks/2015/05/usa-freedom-act-passes-what-we-celebrate-what-we-mourn-and-where-we-go-here'\n            });\n            score += inc;\n        }\n        else if (this.get('final_passage_usaf') == 'BAD') {\n            var inc = -4;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted NO on USA Freedom Act (final passage) and YES on extending the PATRIOT Act',\n                url:\"http://www.restorethe4th.com/blog/most-reps-voting-for-usa-freedom-were-opponents-of-surveillance-reform/\"\n            });\n            score += inc;\n        }\n        if (this.get('s_702_reforms') == 'X') {\n            var inc = 4;\n            score_criteria.push({\n                score:  inc,\n                info:   'Supported bills reforming Section 702 of FISA',\n                url:undefined\n            });\n            score += inc;\n        }\n        if (this.get('massie_lofgren_amendment_to_hr2685_defund_702') == 'GOOD') {\n            var inc = 3;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted YES on Massie-Lofgren Amendment to HR2685: Defund Section 702 surveillance',\n                url:'https://demandprogress.org/letter-of-support-for-massie-lofgren-amendment-to-the-department-of-defense-appropriations-act-of-2016-h-r-2685/'\n            });\n            score += inc;\n        }\n        else if (this.get('massie_lofgren_amendment_to_hr2685_defund_702') == 'BAD') {\n            var inc = -3;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted NO on Massie-Lofgren Amendment to HR2685: Defund Section 702 surveillance',\n                url:'https://demandprogress.org/letter-of-support-for-massie-lofgren-amendment-to-the-department-of-defense-appropriations-act-of-2016-h-r-2685/'\n            });\n            score += inc;\n        }\n        if (this.get('massie_lofgren_amendment_to_hr4870_no_backdoors') == 'GOOD') {\n            var inc = 3;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted YES on Massie-Lofgren Amendment to HR4870: Ban encryption backdoors',\n                url: 'https://shutthebackdoor.net/'\n            });\n            score += inc;\n        }\n        else if (this.get('massie_lofgren_amendment_to_hr4870_no_backdoors') == 'BAD') {\n            var inc = -3;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted NO on Massie-Lofgren Amendment to HR4870: Ban encryption backdoors',\n                url: 'https://shutthebackdoor.net/'\n            });\n            score += inc;\n        }\n        if (this.get('ECPA_reform_cosponsor') == 'GOOD') {\n            console.log(\"ECPA\")\n            var inc = 2;\n            score_criteria.push({\n                score:  inc,\n                info:   'Co-Sponsor of Electronic Commmunication Privacy Act Reform',\n                url: 'https://www.eff.org/deeplinks/2015/09/senate-judiciary-committee-finally-focuses-ecpa-reform'\n            });\n            score += inc;\n        }\n        if (this.get('CISA_cloture_vote') == 'BAD') {\n            var inc = -4;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted for CISA Cloture Vote',\n                url: 'http://www.slate.com/articles/technology/future_tense/2015/10/stopcisa_the_cybersecurity_information_sharing_act_is_a_disaster.html'\n            });\n            score += inc;\n        }\n        else if (this.get('CISA_cloture_vote') == 'GOOD') {\n            var inc = 4;\n\n            score_criteria.push({\n                score: inc,\n                info:   'Voted against CISA Cloture Vote',\n                url: 'http://www.slate.com/articles/technology/future_tense/2015/10/stopcisa_the_cybersecurity_information_sharing_act_is_a_disasteecpareformcosponsorr.html'\n            });\n            score += inc;\n        }\n        if (this.get('house_NCPA') == 'BAD') {\n            var inc = -2;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted for National Cybersecurity Protection Advancement Act',\n                url: 'http://techcrunch.com/2015/04/23/house-passes-complementary-cyber-information-sharing-bill/'\n            });\n            score += inc;\n        }\n        else if (this.get('house_NCPA') == 'GOOD') {\n            var inc = 2;\n\n            score_criteria.push({\n                score: inc,\n                info:   'Voted against National Cybersecurity Protection Advancement Act',\n                url: 'http://techcrunch.com/2015/04/23/house-passes-complementary-cyber-information-sharing-bill/'\n            });\n            score += inc;\n        }\n        if (this.get('house_PCNA') == 'BAD') {\n            var inc = -3;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted for The Protecting Cyber Networks Act ',\n                url: 'https://www.eff.org/deeplinks/2015/04/eff-congress-stop-cybersurveillance-bills'\n            });\n            score += inc;\n        }\n        else if (this.get('house_PCNA') == 'GOOD') {\n            var inc = 3;\n\n            score_criteria.push({\n                score: inc,\n                info:   'Voted against The Protecting Cyber Networks Act ',\n                url: 'https://www.eff.org/deeplinks/2015/04/eff-congress-stop-cybersurveillance-bills'\n            });\n            score += inc;\n        }\n        if (this.get('franken_cisa_amendment') == 'BAD') {\n            var inc = -1;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted against the Franken CISA amendment',\n                url: 'http://www.newsweek.com/senate-passes-controversial-cisa-bill-companies-share-cyber-security-387785'\n            });\n            score += inc;\n        }\n        else if (this.get('franken_cisa_amendment') == 'GOOD') {\n            var inc = 2;\n\n            score_criteria.push({\n                score: inc,\n                info:   'Voted for the Franken CISA amendment ',\n                url: 'http://www.newsweek.com/senate-passes-controversial-cisa-bill-companies-share-cyber-security-387785'\n            });\n            score += inc;\n        }\n        if (this.get('wyden_cisa_amendment') == 'BAD') {\n            var inc = -1;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted against the Wyden CISA amendment',\n                url: 'http://www.freedomworks.org/content/key-vote-yes-wyden-amendment-strengthen-privacy-protections-cisa'\n            });\n            score += inc;\n        }\n        else if (this.get('wyden_cisa_amendment') == 'GOOD') {\n            var inc = 2;\n\n            score_criteria.push({\n                score: inc,\n                info:   'Voted for the Wyden CISA amendment ',\n                url: 'http://www.freedomworks.org/content/key-vote-yes-wyden-amendment-strengthen-privacy-protections-cisa'\n            });\n            score += inc;\n        }\n        if (this.get('heller_cisa_amendment') == 'BAD') {\n            var inc = -1;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted against the Heller CISA amendment',\n                url: 'https://cdt.org/blog/guide-to-cybersecurity-information-sharing-act-amendments/'\n            });\n            score += inc;\n        }\n        else if (this.get('heller_cisa_amendment') == 'GOOD') {\n            var inc = 1;\n\n            score_criteria.push({\n                score: inc,\n                info:   'Voted for the Heller CISA amendment ',\n                url: 'https://cdt.org/blog/guide-to-cybersecurity-information-sharing-act-amendments/'\n            });\n            score += inc;\n        }\n        if (this.get('coons_cisa_amendment') == 'BAD') {\n            var inc = -1;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted against the Coons CISA amendment',\n                url: 'https://cdt.org/blog/guide-to-cybersecurity-information-sharing-act-amendments/'\n            });\n            score += inc;\n        }\n        else if (this.get('coons_cisa_amendment') == 'GOOD') {\n            var inc = 1;\n\n            score_criteria.push({\n                score: inc,\n                info:   'Voted for the Coons CISA amendment ',\n                url: 'https://cdt.org/blog/guide-to-cybersecurity-information-sharing-act-amendments/'\n            });\n            score += inc;\n        }\n        if (this.get('cotton_cisa_amendment') == 'BAD') {\n            var inc = -2;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted for the Cotton CISA amendment',\n                url: 'https://cdt.org/blog/guide-to-cybersecurity-information-sharing-act-amendments/'\n            });\n            score += inc;\n        }\n        else if (this.get('cotton_cisa_amendment') == 'GOOD') {\n            var inc = 1;\n\n            score_criteria.push({\n                score: inc,\n                info:   'Voted against the Cotton CISA amendment ',\n                url: 'https://cdt.org/blog/guide-to-cybersecurity-information-sharing-act-amendments/'\n            });\n            score += inc;\n        }\n        if (this.get('cisa_final') == 'BAD') {\n            var inc = -4;\n            score_criteria.push({\n                score:  inc,\n                info:   'Voted for CISA in the final vote',\n                url: 'http://www.vox.com/platform/amp/2015/10/21/9587190/cisa-senate-privacy-nsa'\n            });\n            score += inc;\n        }\n        else if (this.get('cisa_final') == 'GOOD') {\n            var inc = 4;\n\n            score_criteria.push({\n                score: inc,\n                info:   'Voted against CISA in the final vote ',\n                url: 'http://www.vox.com/platform/amp/2015/10/21/9587190/cisa-senate-privacy-nsa'\n            });\n            score += inc;\n        }\n        if(score >= 15){\n            var grade=\"A+\"\n        }\n        else if(score >= 12){\n            var grade=\"A\"\n        }\n        else if(score >= 10){\n            var grade=\"A-\"\n        }\n        else if(score >= 9){\n            var grade=\"B+\"\n        }\n        else if(score >= 8){\n            var grade=\"B\"\n        }\n        else if(score >= 7){\n            var grade=\"B-\"\n        }\n        else if(score >= 6){\n            var grade=\"B-\"\n        }\n        else if(score >= 5){\n            var grade=\"C+\"\n        }\n        else if(score >= 3){\n            var grade=\"C\"\n        }\n        else if(score >= 0){\n            var grade=\"C-\"\n        }\n        else if(score >= -2){\n            var grade=\"D+\"\n        }\n        else if(score >= -7){\n            var grade=\"D\"\n        }\n        else if(score >= -9){\n            var grade=\"D-\"\n        }\n        else if (this.get('last_name') == 'McConnell') {\n            var grade=\"F-\"\n        }\n        else{\n            var grade=\"F\"\n        }\n        this.set({\n            score: score,\n            grade: grade,\n            score_criteria: score_criteria\n        });\n    },\n\n    shortenState: function(state) {\n        for (var key in STATES)\n            if (STATES.hasOwnProperty(key))\n                if (STATES[key] == state)\n                    return key;\n    }\n});\n\n/**\n    Politicians Collection\n**/\nvar Politicians = Composer.Collection.extend({\n    sortfn: function(a, b) {\n\n        if (a.get('state_short') < b.get('state_short'))\n            return - 1;\n        else if (a.get('state_short') > b.get('state_short'))\n            return 1;\n        else\n            if (a.get('last_name') < b.get('last_name'))\n                return -1;\n            if (a.get('last_name') > b.get('last_name'))\n                return 1;\n            return 0;\n\n    },\n});\n\nvar PoliticiansFilter = Composer.FilterCollection.extend({\n\n    state: 'MA',\n\n    filter: function(model) {\n        var state = this.state;\n\n        if (state == 'all')\n            return true;\n        else if (state == 'house')\n            return model.get('organization') == 'House';\n        else if (state == 'senate')\n            return model.get('organization') == 'Senate';\n        else\n            return model.get('state_short') == this.state;\n    }\n});\n\n;var PoliticalScoreboardView = function (data) {\n    var\n        container = $c('div'),\n        politicians = $c('div'),\n        good = $c('div'),\n        bad = $c('div'),\n        meh = $c('div'),\n        goodPoliticians = $c('div'),\n        badPoliticians = $c('div'),\n        mehPoliticians = $c('div'),\n        label = $c('label'),\n        select = $c('select'),\n        chamberOptGroup = $c('optgroup'),\n        stateOptGroup = $c('optgroup'),\n        allCongress = $c('option'),\n        senate = $c('option'),\n        house = $c('option'),\n        goodHeadline = $c('h3'),\n        badHeadline = $c('h3'),\n        mehHeadline = $c('h3'),\n        goodSubHead = $c('em'),\n        badSubHead = $c('em');\n\n    label.textContent = 'Choose view:';\n    label.htmlFor = '_ps_choose_state';\n    container.appendChild(label);\n\n    select.id = '_ps_choose_state';\n\n    chamberOptGroup.label = 'View by Chamber';\n\n    allCongress.value = 'all';\n    allCongress.textContent = 'All Congress';\n    chamberOptGroup.appendChild(allCongress);\n\n    senate.value = 'senate';\n    senate.textContent = 'Senate';\n    chamberOptGroup.appendChild(senate);\n\n    house.value = 'house';\n    house.textContent = 'House';\n    chamberOptGroup.appendChild(house);\n\n    select.appendChild(chamberOptGroup);\n\n    stateOptGroup.label = 'View by state';\n\n    for (var key in STATES)\n        if (STATES.hasOwnProperty(key)) {\n            var state = $c('option');\n            state.value = key;\n            state.textContent = STATES[key];\n            if (key === data.state)\n                state.selected = true;\n            stateOptGroup.appendChild(state);\n        }\n    select.appendChild(stateOptGroup);\n\n    container.appendChild(select);\n\n    politicians.className = 'politicians';\n    container.appendChild(politicians);\n\n    good.className = 'team internet';\n\n    goodHeadline.textContent = 'Team Internet';\n    good.appendChild(goodHeadline);\n\n    goodSubHead.textContent = 'These politicians are standing up for the free Internet and oppose mass surveillance.';\n    good.appendChild(goodSubHead);\n\n    goodPoliticians.className = 'filtered';\n    good.appendChild(goodPoliticians);\n\n    politicians.appendChild(good);\n\n    bad.className = 'team surveillance';\n\n    badHeadline.textContent = 'Team NSA';\n    bad.appendChild(badHeadline);\n\n    badSubHead.textContent = 'These politicians are working with monopolies to control the Internet for power and profit.';\n    bad.appendChild(badSubHead);\n\n    badPoliticians.className = 'filtered';\n    bad.appendChild(badPoliticians);\n\n    politicians.appendChild(bad);\n\n    meh.className = 'team unknown';\n\n    mehHeadline.textContent = 'Unclear';\n    meh.appendChild(mehHeadline);\n\n    mehPoliticians.className = 'filtered';\n    meh.appendChild(mehPoliticians);\n\n    container.appendChild(meh);\n\n    return container;\n};\n\n;var PoliticianView = function(data) {\n    var\n        div = $c('div'),\n        headshot = $c('div'),\n        img = $c('i'),            // JL NOTE ~ chrome bug fix, remove after issue is gone\n        tweetLink = $c('button'),\n        infoLink = $c('button'),\n        name = $c('h4'),\n        grade = $c('h3'),\n        rollover = $c('div');\n\n    // JL NOTE ~ removed headshot background due to chrome bug. maybe re-add someday?\n    /* headshot.style.backgroundImage = 'url(congress/' + data.politician.image + ')'; */\n    headshot.classList.add('headshot');\n\n    if (data.politician.score >= 6) {\n        div.classList.add('good');\n    } else if (data.politician.score >= 0) {\n        div.classList.add('neutral');\n    } else {\n        div.classList.add('bad');\n    }\n\n    // JL NOTE ~ added this to fix chrome bug, bah -----------------------------\n    if (data.politician.image != \"\"){\n    img.classList.add('congressional-head', data.politician.image.replace('.jpg', ''));\n    }\n    headshot.appendChild(img);\n    // -------------------------------------------------------------------------\n\n    div.appendChild(headshot);\n\n    name.textContent = data.politician.last_name;\n    div.appendChild(name);\n\n    if (!data.noGrade) {\n        grade.classList.add('grade');\n        grade.textContent = data.politician.grade;\n        div.appendChild(grade);\n    }\n\n    rollover.classList.add('rollover');\n\n    tweetLink.classList.add('tweet_link');\n    rollover.appendChild(tweetLink);\n\n    infoLink.classList.add('info_link');\n    infoLink.textContent = 'i';\n    rollover.appendChild(infoLink);\n\n    div.appendChild(rollover);\n\n    if (data.extraInfo) {\n        var ul = $c('ul');\n        ul.classList.add('extra_info');\n        console.log('owl');\n\n        if (data.politician.twitter) {\n            var li = $c('li'),\n                a = $c('a');\n            a.classList.add('inline_tweet');\n            a.href = '#';\n            a.textContent = '@' + data.politician.twitter;\n            li.appendChild(a)\n            ul.appendChild(li);\n        }\n        if (data.politician.phone) {\n            var li = $c('li'),\n                a = $c('a');\n            a.href = 'tel://'+data.politician.phone;\n            a.textContent = data.politician.phone;\n            li.appendChild(a)\n            ul.appendChild(li);\n        }\n        div.appendChild(ul);\n    }\n\n    if (data.state == 'all' || data.state == 'senate' || data.state == 'house'){\n\n        var block = $c('div');\n        if (data.politician.state_short)\n            block.textContent = data.politician.state_short;\n        else\n            block.textContent = '?';\n        if (data.politician.score >= 6) {\n            block.classList.add('good');\n        } else if (data.politician.score >= 0) {\n            block.classList.add('neutral');\n        } else {\n            block.classList.add('bad');\n        }\n        var hidden = $c('div');\n        hidden.className = 'peekaboo';\n        var politician = $c('div');\n        politician.className = 'politician';\n        politician.appendChild(div)\n        hidden.appendChild(politician);\n        block.appendChild(hidden);\n\n\n        return block;\n    } else\n        return div;\n};\n\n;var PoliticianModalView = function (data) {\n    var\n        modal = $c('div'),\n        close = $c('button'),\n        title = $c('h2'),\n        voteList = $c('ul');\n\n    modal.classList.add('modal', 'politician_modal');\n    close.classList.add('close');\n    close.textContent = '⨉';\n    title.textContent = 'How '+data.name+' Voted…';\n\n    modal.appendChild(close);\n    modal.appendChild(title);\n    console.log(data);\n\n\n    for (var i = 0; i < data.positions.length; i++) {\n        var position = $c('li');\n        if (data.positions[i].score < 0) {\n            position.className = 'bad';\n        } else {\n            position.className = 'good';\n        }\n        if (data.positions[i].url === undefined){\n            position.textContent = data.positions[i].info;\n            voteList.appendChild(position);\n        }\n        else {\n            var position_link = $c('a');\n            position_link.href = data.positions[i].url;\n            position_link.target = \"_blank\";\n            position_link.textContent = data.positions[i].info;\n\n            position.appendChild(position_link);\n            voteList.appendChild(position);\n\n        }\n    }\n\n    modal.appendChild(voteList);\n\n    return modal;\n};\n\n;if (!util) var util = {};\n\nutil.generateSpinner = function() {\n    var spinContainer = $c('div');\n    spinContainer.className = 'spinnerContainer';\n\n    var spinner = $c('div');\n    spinner.className = 'spinner';\n    spinContainer.appendChild(spinner);\n\n    for (var i = 1; i <= 12; i++) {\n        var blade = $c('div');\n        blade.className = 'blade d' + (i < 10 ? '0'+i : i);\n\n        var subdiv = $c('div');\n        blade.appendChild(subdiv);\n\n        spinner.appendChild(blade);\n    }\n    return spinContainer;\n};\n\nutil.getReferrerTag = function() {\n    var ref = document.referrer;\n    if (ref.indexOf('facebook.com') !== -1)\n        return 'from-facebook';\n    else if (ref.indexOf('twitter.com') !== -1 || ref.indexOf('t.co') !== -1)\n        return 'from-twitter';\n    else if (ref.indexOf('reddit.com') !== -1)\n        return 'from-reddit';\n    else if (window.location.href.indexOf('_src=ga') !== -1)\n        return 'from-google-adwords';\n    else if (ref.indexOf('google.com') !== -1)\n        return 'from-google';\n}\n\nutil.parseQueryString = function () {\n    var\n        i,\n        pairs,\n        queryObject = {},\n        queryString = window.location.search;\n\n    if (queryString[0] === '?') {\n        queryString = queryString.substr(1);\n    }\n\n    pairs = queryString.split('&');\n    i = pairs.length;\n\n    while (i--) {\n        queryObject[pairs[i].split('=')[0]] = pairs[i].split('=')[1];\n    }\n\n    return queryObject;\n}\n\n;var TWEET_BLASTER_URL = 'https://tweet-congress.herokuapp.com';\n//var TWEET_BLASTER_URL = 'http://metacube:9000';\nvar SPREADSHEET_URL = 'https://spreadsheets.google.com/feeds/list/1rTzEY0sEEHvHjZebIogoKO1qfTez2T6xNj0AScO6t24/default/public/values?alt=json';\n\nvar DEFAULT_TWEETS = [\n    \"Let S. 702 of F.A.A. lapse 12/2017 - NSA & FBI killing our privacy.\",\n]\n\nvar STATES = {\n    'AL': 'Alabama',\n    'AK': 'Alaska',\n    'AZ': 'Arizona',\n    'AR': 'Arkansas',\n    'CA': 'California',\n    'CO': 'Colorado',\n    'CT': 'Connecticut',\n    'DE': 'Delaware',\n    'FL': 'Florida',\n    'GA': 'Georgia',\n    'HI': 'Hawaii',\n    'ID': 'Idaho',\n    'IL': 'Illinois',\n    'IN': 'Indiana',\n    'IA': 'Iowa',\n    'KS': 'Kansas',\n    'KY': 'Kentucky',\n    'LA': 'Louisiana',\n    'ME': 'Maine',\n    'MD': 'Maryland',\n    'MA': 'Massachusetts',\n    'MI': 'Michigan',\n    'MN': 'Minnesota',\n    'MS': 'Mississippi',\n    'MO': 'Missouri',\n    'MT': 'Montana',\n    'NE': 'Nebraska',\n    'NV': 'Nevada',\n    'NH': 'New Hampshire',\n    'NJ': 'New Jersey',\n    'NM': 'New Mexico',\n    'NY': 'New York',\n    'NC': 'North Carolina',\n    'ND': 'North Dakota',\n    'OH': 'Ohio',\n    'OK': 'Oklahoma',\n    'OR': 'Oregon',\n    'PA': 'Pennsylvania',\n    'RI': 'Rhode Island',\n    'SC': 'South Carolina',\n    'SD': 'South Dakota',\n    'TN': 'Tennessee',\n    'TX': 'Texas',\n    'UT': 'Utah',\n    'VT': 'Vermont',\n    'VA': 'Virginia',\n    'WA': 'Washington',\n    'WV': 'West Virginia',\n    'WI': 'Wisconsin',\n    'WY': 'Wyoming',\n};\n\nvar politicians = new Politicians();\nvar unfilteredPoliticians = new Politicians();\nvar geocode = null;\n\n// get the spreadsheet from google\nvar xhr = new XMLHttpRequest();\nxhr.onreadystatechange = function () {\n    if (xhr.readyState === 4) {\n        var res = JSON.parse(xhr.response);\n        for (var i = 0; i < res.feed.entry.length; i++) {\n            var entry = res.feed.entry[i];\n            var politician = new Politician();\n            // console.log(entry)\n            politician.populateFromGoogle(entry);\n            // console.log(politician)\n            if (politician.get(\"active\") !== \"No\"){ \n                politicians.add(politician);\n                unfilteredPoliticians.add(politician);\n            }else{\n               // console.log(\"Inactive\");\n            }\n        }\n\n        // convert to a filter collection (which allows us to filter on state)\n        politicians = new PoliticiansFilter(politicians);\n\n        checkIfFinishedWithXHRs();\n    }\n};\nxhr.open(\"get\", SPREADSHEET_URL, true);\nxhr.send();\n\n// grab the user's location\nvar xhr2 = new XMLHttpRequest();\nxhr2.onreadystatechange = function () {\n    if (xhr2.readyState === 4) {\n        var res = JSON.parse(xhr2.response);\n\n        geocode = res;\n        checkIfFinishedWithXHRs();\n    }\n};\nxhr2.open(\"get\", 'https://fftf-geocoder.herokuapp.com', true);\nxhr2.send();\n\n\n\n// only initialize scoreboard if the spreadsheet & location have loaded via XHR\nvar checkIfFinishedWithXHRs = function () {\n    if (politicians.models().length && geocode)\n        initializeScoreboard();\n};\n\nvar renderTopStateSelector = function() {\n    if (!document.getElementById('placeholder_state_name'))\n      return;\n    document.getElementById('placeholder_state_name').style.display = 'none';\n    var select = $c('select');\n    for (var state in STATES) {\n        if (STATES.hasOwnProperty(state)) {\n            var option = $c('option');\n            option.textContent = STATES[state];\n            option.value = state;\n            if (politicians.state == state)\n                option.selected = true;\n            select.appendChild(option)\n        }\n    }\n    select.onchange = function() {\n        var state = this.options[this.options.selectedIndex].value;\n        var sbState = document.getElementById('_ps_choose_state');\n        for (var i = 0; i < sbState.options.length; i++) {\n            if (sbState.options[i].value == state)\n                sbState.options[i].selected = true;\n        }\n        var event = new UIEvent(\"change\", {\n            \"view\": window,\n            \"bubbles\": true,\n            \"cancelable\": true\n        });\n        sbState.dispatchEvent(event);\n        setTimeout(function() {\n            loadTopPoliticiansByState();\n        }, 10);\n    }\n    select.onclick = function() {\n        document.getElementById('just_state').checked = true;\n        handleTweetSelectorLabels();\n    }\n    document.getElementById('state_selector').appendChild(select);\n}\n\nvar topPoliticians = [null, null];\nvar hasTweeted = false;\n\nvar generateTweetTextFromTopPoliticians = function() {\n    var tweet = '';\n\n    if (topPoliticians[0].model.get('twitter'))\n        tweet += '.@'+topPoliticians[0].model.get('twitter')+', ';\n    else\n        tweet += 'Sen. '+topPoliticians[0].model.get('last_name')+', ';\n\n    if (topPoliticians[1].model.get('twitter'))\n        tweet += '@'+topPoliticians[1].model.get('twitter')+' ';\n    else\n        tweet += 'Sen. '+topPoliticians[1].model.get('last_name')+' ';\n\n    tweet += document.getElementById('tweet_text').value;\n\n    // tweet += ' http://decidethefuture.org';\n\n    console.log('tweet:', tweet);\n    return tweet;\n}\n\nvar loadTopPoliticiansByState = function() {\n    var senators = politicians.select({organization: 'Senate'});\n    for (var i=0; i < senators.length; i++) {\n        if (topPoliticians[i])\n            topPoliticians[i].release();\n\n        topPoliticians[i] = new PoliticianController({\n            model: senators[i],\n            noGrade: true,\n            extraInfo: true,\n            inject: '#targets .side'+i\n        });\n    }\n}\n\nvar handleTweetSelectorLabels = function() {\n    if (!document.getElementById('EVERYONE'))\n      return;\n\n    if (document.getElementById('EVERYONE').checked) {\n        document.getElementById('EVERYONE_label').className = 'sel';\n        document.getElementById('just_state_label').className = '';\n        document.getElementById('tweet_blaster_frame').style.display = 'block';\n        document.getElementById('tweet_your_state').style.display = 'none';\n    } else {\n        document.getElementById('EVERYONE_label').className = '';\n        document.getElementById('just_state_label').className = 'sel';\n        document.getElementById('tweet_blaster_frame').style.display = 'none';\n        document.getElementById('tweet_your_state').style.display = 'block';\n    }\n}\n\nvar handleRemainingTweetText = function() {\n    if (!document.getElementById('tweet_text'))\n      return;\n    var remaining = 105 - document.getElementById('tweet_text').value.length;\n    document.getElementById('remaining').textContent = remaining;\n    if (remaining <= 10)\n        document.getElementById('remaining').className = 'danger';\n    else\n        document.getElementById('remaining').className = '';\n}\n\nvar initializeScoreboard = function () {\n\n    // select the state if the geocoder didn't give us something bogus\n    if (\n        geocode.subdivisions\n        &&\n        geocode.subdivisions.length\n        &&\n        geocode.subdivisions[0].iso_code\n        &&\n        STATES.hasOwnProperty(geocode.subdivisions[0].iso_code)\n    )\n        politicians.state = geocode.subdivisions[0].iso_code;\n\n    politicians.refresh();\n    renderTopStateSelector();\n    loadTopPoliticiansByState();\n\n    if (util.getParameterByName('autotweet')) {\n        var tweetText = generateTweetTextFromTopPoliticians();\n        window.location.replace('https://twitter.com/intent/tweet?text='+encodeURIComponent(tweetText));\n    }\n\n\n    var spinner = document.querySelector('#scoreboard_data .spinnerContainer');\n\n    if (spinner)\n        spinner.remove();\n\n    new PoliticalScoreboardController({\n        collection: politicians,\n        inject: '#scoreboard_data'\n    });\n\n    var bioguide = util.getParameterByName('politician');\n    if (bioguide) {\n        var model = unfilteredPoliticians.select_one({bioguide: bioguide});\n        if (model)\n            new PoliticianModalController({model: model});\n        window.location.replace('#scoreboard');\n    }\n    var searchInput = document.getElementById(\"nameSearch\");\n    searchInput.addEventListener(\"keyup\",filterByPartialName)\n\n\n\n};\n\n\n\nvar filterByPartialName = function(){\n\n    var name = document.getElementById(\"nameSearch\").value;\n\n    var names = name.toLowerCase().split(\" \")\n\n    var distanceThreshold = 3;\n\n    function levenshteinDistance (str1, str2) {\n        if (typeof(str1) !== 'string' || typeof(str2) !== 'string') throw new Error('Pass two strings!')\n\n        var distances = []\n\n        for (var i = 0; i <= str1.length; ++i) distances[i]    = [ i ]\n        for (var i = 0; i <= str2.length; ++i) distances[0][i] =   i\n\n        for (var j = 1; j <= str2.length; ++j)\n            for (var i = 1; i <= str1.length; ++i)\n\n            distances[i][j] =\n\n                str1[i - 1] === str2[j - 1] ? // if the characters are equal\n                distances[i - 1][j - 1] :     // no operation needed\n                                            // else\n                Math.min.apply(Math, [        // take the minimum between\n                distances[i - 1][  j  ] + 1 // a  deletion\n                , distances[  i  ][j - 1] + 1 // an insertion\n                , distances[i - 1][j - 1] + 1 // a  substitution\n            ])\n\n        return distances[str1.length][str2.length]\n    }\n    var results =[]\n\n    for (var i =0;i < names.length;i++){\n        var n = names[i];\n        if (n.length < 3){\n            continue;\n        }\n\n        var filtered = unfilteredPoliticians.filter(function(m){\n        var fname = m.get(\"first_name\").toLowerCase();\n        if (levenshteinDistance(n,fname) < distanceThreshold){\n            return true;\n        }\n        if (fname.match(n)){\n            return true;\n        }\n        var lname = m.get(\"last_name\").toLowerCase();\n        if (levenshteinDistance(n,lname) < distanceThreshold){\n            return true;\n        }\n        if(lname.match(n)){\n            return true;\n        }\n        return false;\n    })\n        results = results.concat(filtered);\n\n    }\n    console.log(results);\n\n    var results_elem = document.getElementById('nameResults');\n    while (results_elem.firstChild) {\n        results_elem.removeChild(results_elem.firstChild);\n    }\n    var frag = document.createDocumentFragment()\n    for(var i =0; i < results.length;i++){\n        var div = document.createElement(\"div\");\n        var button = document.createElement(\"button\");\n        var text = document.createTextNode(results[i].get(\"first_name\") + \" \" +results[i].get(\"last_name\") + \": \" + results[i].get(\"grade\"));\n        var score = results[i].get(\"score\");\n\n\n        if (score >= 6) {\n            div.classList.add('good');\n        } else if (score >= 0) {\n            div.classList.add('neutral');\n        } else {\n            div.classList.add('bad');\n        }\n        button.appendChild(text);\n\n        var cb = (function(model){\n            return function (){new PoliticianModalController({model: model });}\n        })(results[i]);\n\n        button.addEventListener(\"click\", cb);\n\n        var br = document.createElement(\"br\");\n        div.appendChild(button)\n        frag.appendChild(div);\n        frag.appendChild(br);\n        frag.appendChild(br);\n    }\n    results_elem.appendChild(frag);\n}\n\n\nvar alreadyBlasted = false;\n\nwindow.onhashchange = function () {\n    if (window.location.hash == '#blast' && alreadyBlasted == false) {\n        document.getElementById('tweet_blaster_frame').src = TWEET_BLASTER_URL+'/blast?tweet='+encodeURIComponent(document.getElementById('tweet_text').value);\n        window.location.hash = '#';\n        alreadyBlasted = true;\n        popCallModal(true);\n    }\n}\n\n\n// Org coin toss\nif (!util.getParameterByName('org')) {\n    var coinToss = Math.random();\n\n    if (coinToss > .1)\n        window.org = 'fftf';\n    else\n        window.org = 'rt4';\n}\nvar org = util.getParameterByName('org') || window.org;\n\nif (org == 'rt4')\n    window.DONATE_URL = 'https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=245ZSF2CHHYXN';\nelse\n    window.DONATE_URL = 'https://donate.fightforthefuture.org/?tag=decidethefuture';\n\nvar popCallModal = function(tweeted) {\n    new CallModalController({\n        headline:   (tweeted ? 'Thanks for tweeting! Now can you call Congress?' : 'Can you call Congress to #StopCISA?'),\n        campaign:   'cisa-cloture-fax',\n        cta:        'Congress needs to understand that CISA is a dirty mass surveillance bill that won\\'t protect us from cyber attacks. Enter your phone number and we\\'ll connect you to Congress, or dial 1-985-222-CISA on your phone.',\n        callScript: 'Please oppose CISA, the Cybersecurity Information Sharing Act. CISA won\\'t fix the cybersecurity problems we face in the U.S.—it will only lead to more warrantless mass surveillance of millions of Americans. We need real cybersecurity legislation, and it\\'s not CISA.',\n        shareText:  'We\\'re up against some of the most powerful corporate lobbyists in the country, but that hasn\\'t stopped us before. If a critical mass of citizens speak out against CISA, our voices will be impossible to ignore.',\n    });\n}\n\nvar onDomContentLoaded = function() {\n\n    if (politicians.models().length == 0) {\n        var spinner = util.generateSpinner();\n        if (document.getElementById('scoreboard_data'))\n          document.getElementById('scoreboard_data').appendChild(spinner);\n    }\n\n    if (document.querySelector('.action a.tweet'))\n      document.querySelector('.action a.tweet').addEventListener('click', function(e){\n          e.preventDefault();\n          if (!topPoliticians[0])\n              return alert('Hold on, still loading your senators :)');\n\n          var tweetText = generateTweetTextFromTopPoliticians();\n          var win = window.open('https://twitter.com/intent/tweet?text='+encodeURIComponent(tweetText), 'zetsubou_billy', 'width=500, height=300, toolbar=no, status=no, menubar=no');\n\n          var pollTimer = window.setInterval(function() {\n              if (win.closed !== false) { // !== is required for compatibility with Opera\n                  window.clearInterval(pollTimer);\n                  if (hasTweeted == false)\n                      popCallModal(true);\n                  hasTweeted = true;\n              }\n          }, 200);\n      });\n\n\n    handleTweetSelectorLabels();\n    if (document.getElementById('EVERYONE'))\n      document.getElementById('EVERYONE').addEventListener('change', function() {\n          handleTweetSelectorLabels();\n      });\n    if (document.getElementById('just_state'))\n      document.getElementById('just_state').addEventListener('change', function() {\n          handleTweetSelectorLabels();\n      });\n    if (document.getElementById('tweet_text')) {\n      document.getElementById('tweet_text').addEventListener('change', function() {\n          handleRemainingTweetText();\n      });\n      document.getElementById('tweet_text').addEventListener('keyup', function() {\n          handleRemainingTweetText();\n      });\n    }\n    if (document.getElementById('call_congress'))\n      document.getElementById('call_congress').addEventListener('click', function(e) {\n          e.preventDefault();\n          popCallModal();\n      });\n    if (util.getParameterByName('call')) {\n        popCallModal();\n    }\n    var random_tweet = DEFAULT_TWEETS[Math.floor(Math.random()*DEFAULT_TWEETS.length)];\n    if (document.getElementById('tweet_text'))\n      document.getElementById('tweet_text').value = random_tweet;\n\n    handleRemainingTweetText();\n\n    if (document.getElementById('dumbcalltool')) {\n        document.getElementById('dumbcalltool').addEventListener('submit', function(e) {\n            e.preventDefault();\n\n            if (!util.validatePhone(document.getElementById('dumbphonenumber').value)) {\n                alert('Please enter a valid phone number!');\n                return false;\n            }\n\n            var data = new FormData();\n            data.append('campaignId', 'smh');\n            data.append('org', window.org || 'fftf')\n            data.append('userPhone', util.validatePhone(document.getElementById('dumbphonenumber').value));\n\n            var url = 'https://call-congress.fightforthefuture.org/create';\n\n            var xhr = new XMLHttpRequest();\n            xhr.onreadystatechange = function() {\n                if (xhr.readyState === 4) {\n                    console.log('sent!', xhr.response);\n                }\n            }.bind(this);\n            xhr.open(\"post\", url, true);\n            xhr.send(data);\n\n            new CallScriptModalController({\n                callHeadline: 'Awesome! We\\'re calling your phone!',\n                callInstruction: 'Please be polite and tell your lawmaker:',\n                callScript: 'Please stop the dangerous Rule 41 change and refuse to expand surveillance powers. Vote to pass the Stop Mass Hacking Act.',\n            });\n\n            return false;\n        });\n    }\n\n\n\n    (function (doc, win) {\n        \"use strict\";\n\n        var\n            viewMoreLinks = doc.getElementsByClassName('expand-me'),\n            links = viewMoreLinks.length;\n\n// -------------------------------------------------------------------------\n// This is here until the links that make up each company on the Corporate\n// scoreboard are ready to turn into tweets.\nif (doc.getElementById('scoreboard_corporate')) {\n\n        var\n            i, j,\n            corporateScoreboard = doc.getElementById('scoreboard_corporate').getElementsByTagName('table'),\n            tableLinks;\n\n        i = corporateScoreboard.length;\n        while (i--) {\n\n            tableLinks = corporateScoreboard[i].getElementsByTagName('a');\n            j = tableLinks.length;\n\n            while (j--) {\n                tableLinks[j].addEventListener('click', function (e) {\n                    e.preventDefault();\n                });\n            }\n        }\n}\n\n// -------------------------------------------------------------------------\n\n        function expandArticle(e) {\n            e.preventDefault();\n\n            console.log('derp');\n\n            var\n                href = e.target.getAttribute('href').replace(/#/, '');\n            doc.getElementById(href).classList.add('expanded');\n        }\n\n        while (links--) {\n            viewMoreLinks[links].addEventListener('click', expandArticle);\n        }\n\n        if (document.getElementById('petition-form'))\n          win.components.petitions(doc, win);\n\n        if (document.getElementById('whiplist'))\n          win.components.whiplist(doc, win);\n\n    })(document, window);\n};\n\n// Wait for DOM content to load.\nif (document.readyState == \"complete\" || document.readyState == \"loaded\" || document.readyState == \"interactive\") {\n    onDomContentLoaded();\n} else if (document.addEventListener) {\n    document.addEventListener('DOMContentLoaded', onDomContentLoaded, false);\n}\n\n(function (doc, win) {\n  \"use strict\";\n\n  win.callbacks = win.callbacks || {};\n  win.callbacks.petitions = {\n    preSubmit: function() {\n      document.body.querySelector('[type=\"submit\"]').disabled = true;\n    },\n\n    loadSignatureResponse: function(e) {\n      var xhr = e.target;\n      if (xhr.status >= 200 && xhr.status < 400) {\n\n        // popCallModal();\n        var\n          form = document.getElementById('petition-form'),\n          thanks = document.getElementById('thanks');\n        document.getElementById('form-headline').classList.add('hidden');\n        thanks.classList.remove('hidden');\n        form.removeAttribute('style');\n        form.innerHTML = '';\n        form.appendChild(thanks);\n\n      } else {\n         handleSigningError(xhr);\n      }\n    },\n\n    handleSigningError: function(e) {\n      document.body.querySelector('[type=\"submit\"]').disabled = false;\n      console.log('AN ERROR OCCURRED WHILE SENDING YOUR PETITION: ', e);\n      alert('AN ERROR OCCURRED WHILE SENDING YOUR PETITION');\n    }\n  }\n\n})(document, window);\n\n//# sourceMappingURL=core.js.map"]}