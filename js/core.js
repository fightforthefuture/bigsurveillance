/*
 @licstart  The following is the entire license notice for the
    JavaScript code in this page.

 Copyright (C) 2015 Fight for the Future
 Copyright (C) 2015 Zaki Manian

 The JavaScript code in this page is free software: you can
 redistribute it and/or modify it under the terms of the GNU
 General Public License (GNU GPL) as published by the Free Software
 Foundation, either version 3 of the License, or (at your option)
 any later version. The code is distributed WITHOUT ANY WARRANTY;
 without even the implied warranty of MERCHANTABILITY or FITNESS
 FOR A PARTICULAR PURPOSE. See the GNU GPL for more details.

 As additional permission under GNU GPL version 3 section 7, you
 may distribute non-source (e.g., minimized or compacted) forms of
 that code without the copy of the GNU GPL normally required by
 section 4, provided you include this license notice and a URL
 through which recipients can access the Corresponding Source.

 @licend  The above is the entire license notice
    for the JavaScript code in this page.
*/

window.components=window.components||{},window.components.petitions=function(a,b){"use strict";function c(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function d(b,d){function e(){h+=k,h=Math.ceil(h),(h>=g||h>=j)&&(h=g,clearInterval(f));var b=c(h);i.setAttribute("max",j.toString(10)),i.setAttribute("value",h.toString(10)),i.setAttribute("title",b+" signatures"),a.getElementById("total-sigs").textContent=b,a.getElementById("sigs-to-go").textContent=c(d-h)+" needed to reach "+c(d),i.textContent=b+" signatures"}var f,g=b.isNaN?0:b,h=0,i=a.getElementById("signatures-progress-bar"),j=parseInt(d),k=g/1500*30;return!!i&&void(f=setInterval(function(){e()},30))}function e(){d(1519,2500)}function f(){var c,f=new XMLHttpRequest;f.open("GET",n+"/petition?identifier="+o,!0),f.addEventListener("load",function(){f.status>=200&&f.status<400?(c=JSON.parse(f.responseText),d(c.signatures,c.goal),"www.freechelsea.com"===b.location.hostname&&c.signatures<1e3&&(a.querySelector(".signatures").style.display="none")):e()}),f.addEventListener("error",e),f.send()}function g(){var b=a.getElementById("form-zip_code");"US"!==q.value?b.setAttribute("placeholder","Post Code"):b.setAttribute("placeholder","ZIP")}function h(){p.parentNode.removeChild(p),q.setAttribute("name","signature[country]"),q.classList.add("visible"),r.classList.add("hidden")}function i(c){function d(){var c=JSON.parse(a.querySelector('[name="subscription[tag_list]"]').value);util.getReferrerTag()&&c.push(util.getReferrerTag());var d=new FormData;d.append("guard",""),d.append("hp_enabled",!0),d.append("org",window.org?window.org:"fftf"),d.append("an_tags",JSON.stringify(c)),d.append("an_url",b.location.href),d.append("an_petition",m.action.replace("/signatures","")),d.append("member[first_name]",a.getElementById("form-first_name").value),d.append("member[email]",a.getElementById("form-email").value),d.append("member[postcode]",a.getElementById("form-zip_code").value),d.append("member[country]",q.value),a.getElementById("opt-in")&&"checkbox"===a.getElementById("opt-in").getAttribute("type")&&a.getElementById("opt-in").checked===!1&&d.append("opt_out",!0),a.getElementById("form-street_address")&&d.append("member[street_address]",a.getElementById("form-street_address").value),a.getElementById("form-phone_number")&&d.append("member[phone_number]",a.getElementById("form-phone_number").value),a.getElementById("form-comments")&&d.append("action_comment",a.getElementById("form-comments").value),s.source&&d.append("subscription[source]",s.source);var e=a.querySelector('meta[name="autoresponder_hours"]'),f=a.querySelector('meta[name="autoresponder_active"]');d.append("autoresponder_hours",e?e.content:72),f&&d.append("autoresponder_active",1);var g=document.querySelector('input[name="_mothership_tag"]');return g&&g.value?d.append("tag",g.value):d.append("tag",window.location.pathname),d}o&&c.preventDefault();var e=new XMLHttpRequest;b.callbacks.petitions.preSubmit(),e.open("POST","https://queue.fightforthefuture.org/action",!0),e.addEventListener("error",b.callbacks.petitions.handleSigningError),e.addEventListener("load",b.callbacks.petitions.loadSignatureResponse),e.send(d()),"undefined"!=typeof FreeProgress&&FreeProgress.convert()}function j(){r.addEventListener("click",h),q.addEventListener("change",g),m.addEventListener("submit",i)}function k(){f(),j()}var l=a.getElementsByTagName("body")[0],m=a.getElementById("petition-form"),n=m.dataset.host,o=m.dataset.petitionId,p=(l.querySelector('[type="submit"]'),a.getElementById("hidden-country")),q=a.getElementById("select-country"),r=a.querySelector('[for="select-country"]'),s=b.util.parseQueryString();k()},window.components=window.components||{},window.components.whiplist=function(a,b){"use strict";var c={},d={},e={},f={},g=function(b){c[b]=[],d[b]=[],e[b]={},f[b]={};for(var g=a.getElementById(b).querySelectorAll("li"),h=0;h<g.length;h++){var i=g[h].querySelector('input[name="state"]').value,j=g[h].querySelector('input[name="lastname"]').value;c[b].indexOf(i)===-1&&c[b].push(i),d[b].indexOf(j)===-1&&d[b].push(j),"undefined"==typeof e[b][i]?e[b][i]=[g[h]]:e[b][i].push(g[h]),"undefined"==typeof f[b][j]?f[b][j]=[g[h]]:f[b][j].push(g[h])}c[b]=c[b].sort(),d[b]=d[b].sort()},h=function(b){var c=$c("div"),d=$c("label"),e=$c("select"),f=$c("option"),g=$c("option");c.className="sort",d.htmlFor="order_"+b,d.textContent="Sort by: ",e.id="order_"+b,f.value="name",f.textContent="Name",e.appendChild(f),g.value="state",g.textContent="State",e.appendChild(g),c.appendChild(d),c.appendChild(e),a.getElementById("sort_"+b).appendChild(c)},i=function(b){a.getElementById("order_"+b).addEventListener("change",function(){j(b)})},j=function(b,g){var h=a.getElementById(b),i=a.getElementById("order_"+b);if(h.innerHTML="","state"==i[i.selectedIndex].value)var j=c[b],k=e[b];else if("name"==i[i.selectedIndex].value)var j=d[b],k=f[b];for(var l=0;l<j.length;l++)for(var n=0;n<k[j[l]].length;n++)h.appendChild(k[j[l]][n]);g||m(b)},k=function(b){var d=$c("div"),e=$c("label"),f=$c("select"),g=$c("option");d.className="filter",e.htmlFor="filter_"+b,e.textContent="Show state: ",f.id="filter_"+b,g.value="",g.textContent="(all states)",f.appendChild(g);for(var h=0;h<c[b].length;h++){var i=$c("option");i.value=c[b][h],i.textContent=c[b][h],f.appendChild(i)}d.appendChild(e),d.appendChild(f),a.getElementById("sort_"+b).appendChild(d)},l=function(b){a.getElementById("filter_"+b).addEventListener("change",function(){m(b)})},m=function(b){var c=a.getElementById(b),d=a.getElementById("filter_"+b);if(j(b,!0),0!=d.selectedIndex)for(var e=d[d.selectedIndex].value,f=c.querySelectorAll("li"),g=0;g<f.length;g++){var h=f[g].querySelector('input[name="state"]').value;h!=e&&c.removeChild(f[g])}},n=function(){for(var b=document.querySelectorAll(".whip"),c=0;c<b.length;c++){var d=b[c].id;a.getElementById("sort_"+d)&&(g(d),k(d),l(d),h(d),i(d))}};n()};var PoliticalScoreboardController=Composer.Controller.extend({elements:{".internet .filtered":"good_list",".surveillance .filtered":"bad_list",".unknown .filtered":"meh_list",".team.unknown":"meh_panel",select:"select"},events:{"change select":"filter"},collection:null,good:null,bad:null,meh:null,init:function(){this.render(),this.good=new Composer.FilterCollection(this.collection,{filter:function(a){return a.get("score")>=6&&"No"!==a.get("active")}}),this.init_list(this.good,this.good_list),this.bad=new Composer.FilterCollection(this.collection,{filter:function(a){return a.get("score")<0&&"No"!==a.get("active")}}),this.init_list(this.bad,this.bad_list),this.meh=new Composer.FilterCollection(this.collection,{filter:function(a){return a.get("score")>=0&&a.get("score")<=5&&"No"!==a.get("active")}}),this.init_list(this.meh,this.meh_list),this.with_bind(this.meh,"reset",this.maybeHideMehPanel.bind(this)),this.maybeHideMehPanel()},init_list:function(a,b){var c=this.collection;new Composer.ListController({collection:a,inject:b,init:function(){this.track(this.collection,function(a,b){return new PoliticianController({inject:this.el,model:a,masterCollection:c})}.bind(this),{bind_reset:!0})}})},render:function(){var a=PoliticalScoreboardView({state:this.collection.state});this.html(a)},filter:function(){var a=this.select.options[this.select.selectedIndex].value;this.collection.state=a,this.collection.refresh()},maybeHideMehPanel:function(){0==this.meh.models().length?this.meh_panel.classList.add("hidden"):this.meh_panel.classList.remove("hidden")}}),PoliticianController=Composer.Controller.extend({events:{"click button.tweet_link":"tweet","click button.info_link":"info","click h4":"tweet","click .headshot":"tweet","click .inline_tweet":"tweet","click .peekaboo":"click"},elements:{".peekaboo":"hidden"},model:null,noGrade:!1,extraInfo:!1,masterCollection:null,init:function(){this.render()},render:function(){if(this.masterCollection&&this.masterCollection.state)var a=this.masterCollection.state;else var a=null;var b=PoliticianView({state:a,politician:this.model.toJSON(),noGrade:this.noGrade,extraInfo:this.extraInfo});this.html(b),"all"==a||"senate"==a||"house"==a?this.el.className="block":this.el.className="politician"},tweet:function(a){a.preventDefault();var b=this.model.get("twitter");if(b=b?".@"+b:"House"==this.model.get("organization")?"Rep. "+this.model.get("last_name"):"Sen. "+this.model.get("last_name"),"A"==this.model.get("grade").charAt(0)||"F"==this.model.get("grade").charAt(0));else;var c=window.location.protocol+"//"+window.location.host+"?politician="+this.model.get("bioguide"),d=encodeURIComponent(b+" Let S. 702 of F.A.A. lapse - NSA & FBI killing our privacy. #Sunset702 #NoBackdoorSearches "+c);window.open("https://twitter.com/intent/tweet?text="+d)},info:function(a){a&&a.preventDefault(),new PoliticianModalController({model:this.model})},click:function(a){a&&a.preventDefault(),a.target&&this.hidden&&a.target==this.hidden&&this.info()}}),PoliticianModalController=BaseShareModalController.extend({init:function(){this.render(),this.show(),console.log(this.model.toJSON())},render:function(){var a=this.base_render();a.firstChild.appendChild(PoliticianModalView({positions:this.model.get("score_criteria"),name:this.model.get("first_name")+" "+this.model.get("last_name")})),this.html(a)}}),Politician=Composer.Model.extend({populateFromGoogle:function(a){var b=function(b){return a["gsx$"+b].$t.trim()};this.set({first_name:b("first"),last_name:b("name"),image:b("imagepleasedontedit"),bioguide:b("bioguide"),email:b("email"),phone:b("phone"),organization:b("organization"),state:b("state"),state_short:this.shortenState(b("state")),twitter:b("twitter"),party:b("partyaffiliation"),vote_usaf:b("voteusaf"),vote_tempreauth:b("votetempreauth"),office1:b("office1"),office1phone:b("office1phone"),office1geo:b("office1geo"),office2:b("office2"),office2phone:b("office2phone"),office2geo:b("office2geo"),office3:b("office3"),office3phone:b("office3phone"),office3geo:b("office3geo"),office4:b("office4"),office4phone:b("office4phone"),office4geo:b("office4geo"),office5:b("office5"),office5phone:b("office5phone"),office5geo:b("office5geo"),office6:b("office6"),office6phone:b("office6phone"),office6geo:b("office6geo"),office7:b("office7"),office7phone:b("office7phone"),office7geo:b("office7geo"),office8:b("office8"),office8phone:b("office8phone"),office8geo:b("office8geo"),active:b("active"),score:0,score_criteria:[],fisa_courts_reform_act:b("fisacourtsreformact"),s_1551_iosra:b("s1551iosra"),fisa_improvements_act:b("fisaimprovementsact"),fisa_transparency_and_modernization_act:b("fisatransparencyandmodernizationact"),surveillance_state_repeal_act:b("surveillancestaterepealact"),usa_freedom_prior_to_20140518:b("usafreedompriorto2014-05-18"),voted_for_conyers_amash_amendment:b("votedforconyersamashamendment"),voted_for_house_version_of_usa_freedom_act_2014:b("votedforhouseversionofusafreedomact2014"),voted_for_massie_lofgren_amendment_2014:b("votedformassielofgrenamendment2014"),whistleblower_protection_for_ic_employees_contractors:b("whistleblowerprotectionforicemployeescontractors"),first_usaf_cloture_vote:b("stusafcloturevote"),straight_reauth:b("straightreauth"),fisa_reform_act:b("fisareformact"),amendment_1449_data_retention:b("amendment1449dataretention"),amendment_1450_extend_implementation_to_1yr:b("amendment1450extendimplementationto1yr"),amendment_1451_gut_amicus:b("amendment1451gutamicus"),final_passage_usaf:b("finalpassageusaf"),s_702_reforms:b("reforms"),massie_lofgren_amendment_to_hr2685_defund_702:b("massielofgrenamendmenttohr2685defund702"),massie_lofgren_amendment_to_hr4870_no_backdoors:b("massielofgrenamendmenttohr4870nobackdoors"),ECPA_reform_cosponsor:b("ecpareformcosponsor"),house_PCNA:b("housepcna"),house_NCPA:b("housencpaa"),ECPA_reform_cosponsor:b("ecpareformcosponsor"),CISA_cloture_vote:b("cisacloture"),franken_cisa_amendment:b("frankencisaamendment"),wyden_cisa_amendment:b("wydencisaamendment"),heller_cisa_amendment:b("hellercisaamendment"),coons_cisa_amendment:b("coonscisaamendment"),coons_cisa_amendment:b("cottoncisaamendment"),cisa_final:b("cisafinal")},{silent:!0}),this.doScore()},doScore:function(){var a=0,b=[];if("X"==this.get("fisa_courts_reform_act")){var c=3;b.push({score:c,info:"Supported the FISA Courts Reform Act",url:"http://www.ibtimes.com/nsa-fisa-surveillance-obama-likely-back-secret-court-reform-senator-says-1368781"}),a+=c}if("X"==this.get("s_1551_iosra")){var c=4;b.push({score:c,info:"Supported the Intelligence Oversight and Surveillance Reform Act",url:"https://cdt.org/blog/bills-offer-clear-choice-end-bulk-collection-of-americans%E2%80%99-data-or-endorse-it/"}),a+=c}if("X"==this.get("fisa_improvements_act")){var c=-4;b.push({score:c,info:"Supported the FISA Improvements Act",url:"http://www.theguardian.com/world/2013/nov/15/feinstein-bill-nsa-warrantless-searches-surveillance"}),a+=c}if("X"==this.get("fisa_transparency_and_modernization_act")){var c=-4;b.push({score:c,info:"Supported the FISA Transparency and Modernization Act",url:"https://www.eff.org/deeplinks/2014/04/nsa-reform-bill-intelligence-community-written-intelligence-community-and"}),a+=c}if("X"==this.get("surveillance_state_repeal_act")){var c=4;b.push({score:c,info:"Supported the Surveillance State Repeal Act",url:"http://www.restorethe4th.com/blog/go-big-or-go-home-pass-the-new-surveillance-state-repeal-act/"}),a+=c}if("X"==this.get("usa_freedom_prior_to_20140518")){var c=2;b.push({score:c,info:"Supported the original USA Freedom Act (prior to May 18th, 2014)",url:" https://www.eff.org/deeplinks/2014/07/new-senate-usa-freedom-act-first-step-towards-reforming-mass-surveillance"}),a+=c}if("X"==this.get("voted_for_conyers_amash_amendment")){var c=4;b.push({score:c,info:"Voted for Conyers Amash Amendment",url:" http://americablog.com/2013/07/amash-conyers-anti-nsa-amendment-lost-by-12-votes-205-217.html"}),a+=c}if("X"==this.get("voted_for_house_version_of_usa_freedom_act_2014")){var c=-2;b.push({score:c,info:"Voted for gutted House version of USA Freedom Act of 2014",url:"https://www.eff.org/deeplinks/2014/05/eff-dismayed-houses-gutted-usa-freedom-act"}),a+=c}if("X"==this.get("voted_for_massie_lofgren_amendment_2014")){var c=3;b.push({score:c,info:"Voted for Massie-Lofgren Amendment (2014)",url:" http://www.huffingtonpost.com/2014/12/10/nsa-surveillance-spending-bill_n_6304834.html"}),a+=c}if("X"==this.get("whistleblower_protection_for_ic_employees_contractors")){var c=4;b.push({score:c,info:"Supported whistleblower protection measures for Intelligence employees and contractors",url:"http://whistleblower.org/blog/121230-49-orgs-call-congress-restore-whistleblower-rights-intelligence-contractors"}),a+=c}if("GOOD"==this.get("first_usaf_cloture_vote")){var c=4;b.push({score:c,info:"Voted NO on reauthorizing the PATRIOT Act *and* NO on cloture for the first Senate USA Freedom Act",url:"http://www.thewhir.com/web-hosting-news/senate-votes-to-invoke-cloture-on-usa-freedom-act-advancing-it-to-an-amendment-process"}),a+=c}else if("OK"==this.get("first_usaf_cloture_vote")){var c=-1;b.push({score:c,info:"Voted NO on reauthorizing the PATRIOT Act *and* YES on cloture for the first Senate USA Freedom Act",url:"http://www.thewhir.com/web-hosting-news/senate-votes-to-invoke-cloture-on-usa-freedom-act-advancing-it-to-an-amendment-process"}),a+=c}else if("BAD"==this.get("first_usaf_cloture_vote")){var c=-4;b.push({score:c,info:"Voted YES on reauthorizing the PATRIOT Act and NO on the first USA Freedom Act cloture vote",url:"http://thehill.com/policy/national-security/242173-mcconnell-introduces-short-term-nsa-bill"}),a+=c}if("GOOD"==this.get("straight_reauth")){var c=3;b.push({score:c,info:"Voted NO on reauthorizing the PATRIOT Act",url:"http://thehill.com/policy/national-security/242173-mcconnell-introduces-short-term-nsa-bill"}),a+=c}else if("BAD"==this.get("straight_reauth")){var c=-3;b.push({score:c,info:"Voted YES on reauthorizing the PATRIOT Act",url:"https://cdt.org/insight/oppose-senator-feinsteins-fisa-reform-act-of-2015/"}),a+=c}if("X"==this.get("fisa_reform_act")){var c=-3;b.push({score:c,info:"Supported the FISA Reform Act",url:"https://www.eff.org/deeplinks/2015/06/eff-opposes-amendments-weakening-usa-freedom-act"}),a+=c}if("GOOD"==this.get("amendment_1449_data_retention")){var c=1;b.push({score:c,info:"Voted NO on USA Freedom data retention amendment (1449)",url:"https://www.eff.org/deeplinks/2015/06/eff-opposes-amendments-weakening-usa-freedom-act"}),a+=c}else if("BAD"==this.get("amendment_1449_data_retention")){var c=-3;b.push({score:c,info:"Voted YES on USA Freedom data retention amendment (1449)",url:"https://www.eff.org/deeplinks/2015/06/eff-opposes-amendments-weakening-usa-freedom-act"}),a+=c}if("GOOD"==this.get("amendment_1450_extend_implementation_to_1yr")){var c=1;b.push({score:c,info:"Voted NO on amendment 1450 extending implementation of USA Freedom Act by 1 year",url:"https://www.eff.org/deeplinks/2015/06/eff-opposes-amendments-weakening-usa-freedom-act"}),a+=c}else if("BAD"==this.get("amendment_1450_extend_implementation_to_1yr")){var c=-2;b.push({score:c,info:"Voted YES on amendment 1450 extending implementation of USA Freedom Act by 1 year",url:"https://www.eff.org/deeplinks/2015/06/eff-opposes-amendments-weakening-usa-freedom-act"}),a+=c}if("GOOD"==this.get("amendment_1451_gut_amicus")){var c=1;b.push({score:c,info:"Voted NO on amendment 1451 to gut amicus proceedings",url:"https://www.eff.org/deeplinks/2015/06/eff-opposes-amendments-weakening-usa-freedom-act"}),a+=c}else if("BAD"==this.get("amendment_1451_gut_amicus")){var c=-3;b.push({score:c,info:"Voted YES on amendment 1451 to gut amicus proceedings",url:"https://www.eff.org/deeplinks/2015/06/eff-opposes-amendments-weakening-usa-freedom-act"}),a+=c}if("GOOD"==this.get("final_passage_usaf")){var c=4;b.push({score:c,info:"Voted NO on USA Freedom Act (final passage)",url:"http://www.restorethe4th.com/blog/most-reps-voting-for-usa-freedom-were-opponents-of-surveillance-reform/"}),a+=c}else if("OK"==this.get("final_passage_usaf")){var c=-1;b.push({score:c,info:"Voted YES on reforming bulk collection via USAF",url:"https://www.eff.org/deeplinks/2015/05/usa-freedom-act-passes-what-we-celebrate-what-we-mourn-and-where-we-go-here"}),a+=c}else if("BAD"==this.get("final_passage_usaf")){var c=-4;b.push({score:c,info:"Voted NO on USA Freedom Act (final passage) and YES on extending the PATRIOT Act",url:"http://www.restorethe4th.com/blog/most-reps-voting-for-usa-freedom-were-opponents-of-surveillance-reform/"}),a+=c}if("X"==this.get("s_702_reforms")){var c=4;b.push({score:c,info:"Supported bills reforming Section 702 of FISA",url:void 0}),a+=c}if("GOOD"==this.get("massie_lofgren_amendment_to_hr2685_defund_702")){var c=3;b.push({score:c,info:"Voted YES on Massie-Lofgren Amendment to HR2685: Defund Section 702 surveillance",url:"https://demandprogress.org/letter-of-support-for-massie-lofgren-amendment-to-the-department-of-defense-appropriations-act-of-2016-h-r-2685/"}),a+=c}else if("BAD"==this.get("massie_lofgren_amendment_to_hr2685_defund_702")){var c=-3;b.push({score:c,info:"Voted NO on Massie-Lofgren Amendment to HR2685: Defund Section 702 surveillance",url:"https://demandprogress.org/letter-of-support-for-massie-lofgren-amendment-to-the-department-of-defense-appropriations-act-of-2016-h-r-2685/"}),a+=c}if("GOOD"==this.get("massie_lofgren_amendment_to_hr4870_no_backdoors")){var c=3;b.push({score:c,info:"Voted YES on Massie-Lofgren Amendment to HR4870: Ban encryption backdoors",url:"https://shutthebackdoor.net/"}),a+=c}else if("BAD"==this.get("massie_lofgren_amendment_to_hr4870_no_backdoors")){var c=-3;b.push({score:c,info:"Voted NO on Massie-Lofgren Amendment to HR4870: Ban encryption backdoors",url:"https://shutthebackdoor.net/"}),a+=c}if("GOOD"==this.get("ECPA_reform_cosponsor")){console.log("ECPA");var c=2;b.push({score:c,info:"Co-Sponsor of Electronic Commmunication Privacy Act Reform",url:"https://www.eff.org/deeplinks/2015/09/senate-judiciary-committee-finally-focuses-ecpa-reform"}),a+=c}if("BAD"==this.get("CISA_cloture_vote")){var c=-4;b.push({score:c,info:"Voted for CISA Cloture Vote",url:"http://www.slate.com/articles/technology/future_tense/2015/10/stopcisa_the_cybersecurity_information_sharing_act_is_a_disaster.html"}),a+=c}else if("GOOD"==this.get("CISA_cloture_vote")){var c=4;b.push({score:c,info:"Voted against CISA Cloture Vote",url:"http://www.slate.com/articles/technology/future_tense/2015/10/stopcisa_the_cybersecurity_information_sharing_act_is_a_disasteecpareformcosponsorr.html"}),a+=c}if("BAD"==this.get("house_NCPA")){var c=-2;b.push({score:c,info:"Voted for National Cybersecurity Protection Advancement Act",url:"http://techcrunch.com/2015/04/23/house-passes-complementary-cyber-information-sharing-bill/"}),a+=c}else if("GOOD"==this.get("house_NCPA")){var c=2;b.push({score:c,info:"Voted against National Cybersecurity Protection Advancement Act",url:"http://techcrunch.com/2015/04/23/house-passes-complementary-cyber-information-sharing-bill/"}),a+=c}if("BAD"==this.get("house_PCNA")){var c=-3;b.push({score:c,info:"Voted for The Protecting Cyber Networks Act ",url:"https://www.eff.org/deeplinks/2015/04/eff-congress-stop-cybersurveillance-bills"}),a+=c}else if("GOOD"==this.get("house_PCNA")){var c=3;b.push({score:c,info:"Voted against The Protecting Cyber Networks Act ",url:"https://www.eff.org/deeplinks/2015/04/eff-congress-stop-cybersurveillance-bills"}),a+=c}if("BAD"==this.get("franken_cisa_amendment")){var c=-1;b.push({score:c,info:"Voted against the Franken CISA amendment",url:"http://www.newsweek.com/senate-passes-controversial-cisa-bill-companies-share-cyber-security-387785"}),a+=c}else if("GOOD"==this.get("franken_cisa_amendment")){var c=2;b.push({score:c,info:"Voted for the Franken CISA amendment ",url:"http://www.newsweek.com/senate-passes-controversial-cisa-bill-companies-share-cyber-security-387785"}),a+=c}if("BAD"==this.get("wyden_cisa_amendment")){var c=-1;b.push({score:c,info:"Voted against the Wyden CISA amendment",url:"http://www.freedomworks.org/content/key-vote-yes-wyden-amendment-strengthen-privacy-protections-cisa"}),a+=c}else if("GOOD"==this.get("wyden_cisa_amendment")){var c=2;b.push({score:c,info:"Voted for the Wyden CISA amendment ",url:"http://www.freedomworks.org/content/key-vote-yes-wyden-amendment-strengthen-privacy-protections-cisa"}),a+=c}if("BAD"==this.get("heller_cisa_amendment")){var c=-1;b.push({score:c,info:"Voted against the Heller CISA amendment",url:"https://cdt.org/blog/guide-to-cybersecurity-information-sharing-act-amendments/"}),a+=c}else if("GOOD"==this.get("heller_cisa_amendment")){var c=1;b.push({score:c,info:"Voted for the Heller CISA amendment ",url:"https://cdt.org/blog/guide-to-cybersecurity-information-sharing-act-amendments/"}),a+=c}if("BAD"==this.get("coons_cisa_amendment")){var c=-1;b.push({score:c,info:"Voted against the Coons CISA amendment",url:"https://cdt.org/blog/guide-to-cybersecurity-information-sharing-act-amendments/"}),a+=c}else if("GOOD"==this.get("coons_cisa_amendment")){var c=1;b.push({score:c,info:"Voted for the Coons CISA amendment ",url:"https://cdt.org/blog/guide-to-cybersecurity-information-sharing-act-amendments/"}),a+=c}if("BAD"==this.get("cotton_cisa_amendment")){var c=-2;b.push({score:c,info:"Voted for the Cotton CISA amendment",url:"https://cdt.org/blog/guide-to-cybersecurity-information-sharing-act-amendments/"}),a+=c}else if("GOOD"==this.get("cotton_cisa_amendment")){var c=1;b.push({score:c,info:"Voted against the Cotton CISA amendment ",url:"https://cdt.org/blog/guide-to-cybersecurity-information-sharing-act-amendments/"}),a+=c}if("BAD"==this.get("cisa_final")){var c=-4;b.push({score:c,info:"Voted for CISA in the final vote",url:"http://www.vox.com/platform/amp/2015/10/21/9587190/cisa-senate-privacy-nsa"}),a+=c}else if("GOOD"==this.get("cisa_final")){var c=4;b.push({score:c,info:"Voted against CISA in the final vote ",url:"http://www.vox.com/platform/amp/2015/10/21/9587190/cisa-senate-privacy-nsa"}),a+=c}if(a>=15)var d="A+";else if(a>=12)var d="A";else if(a>=10)var d="A-";else if(a>=9)var d="B+";else if(a>=8)var d="B";else if(a>=7)var d="B-";else if(a>=6)var d="B-";else if(a>=5)var d="C+";else if(a>=3)var d="C";else if(a>=0)var d="C-";else if(a>=-2)var d="D+";else if(a>=-7)var d="D";else if(a>=-9)var d="D-";else if("McConnell"==this.get("last_name"))var d="F-";else var d="F";this.set({score:a,grade:d,score_criteria:b})},shortenState:function(a){for(var b in STATES)if(STATES.hasOwnProperty(b)&&STATES[b]==a)return b}}),Politicians=Composer.Collection.extend({sortfn:function(a,b){return a.get("state_short")<b.get("state_short")?-1:a.get("state_short")>b.get("state_short")?1:a.get("last_name")<b.get("last_name")?-1:a.get("last_name")>b.get("last_name")?1:0}}),PoliticiansFilter=Composer.FilterCollection.extend({state:"MA",filter:function(a){var b=this.state;return"all"==b||("house"==b?"House"==a.get("organization"):"senate"==b?"Senate"==a.get("organization"):a.get("state_short")==this.state)}}),PoliticalScoreboardView=function(a){var b=$c("div"),c=$c("div"),d=$c("div"),e=$c("div"),f=$c("div"),g=$c("div"),h=$c("div"),i=$c("div"),j=$c("label"),k=$c("select"),l=$c("optgroup"),m=$c("optgroup"),n=$c("option"),o=$c("option"),p=$c("option"),q=$c("h3"),r=$c("h3"),s=$c("h3"),t=$c("em"),u=$c("em");j.textContent="Choose view:",j.htmlFor="_ps_choose_state",b.appendChild(j),k.id="_ps_choose_state",l.label="View by Chamber",n.value="all",n.textContent="All Congress",l.appendChild(n),o.value="senate",o.textContent="Senate",l.appendChild(o),p.value="house",p.textContent="House",l.appendChild(p),k.appendChild(l),m.label="View by state";for(var v in STATES)if(STATES.hasOwnProperty(v)){var w=$c("option");w.value=v,w.textContent=STATES[v],v===a.state&&(w.selected=!0),m.appendChild(w)}return k.appendChild(m),b.appendChild(k),c.className="politicians",b.appendChild(c),d.className="team internet",q.textContent="Team Internet",d.appendChild(q),t.textContent="These politicians are standing up for the free Internet and oppose mass surveillance.",d.appendChild(t),g.className="filtered",d.appendChild(g),c.appendChild(d),e.className="team surveillance",r.textContent="Team NSA",e.appendChild(r),u.textContent="These politicians are working with monopolies to control the Internet for power and profit.",e.appendChild(u),h.className="filtered",e.appendChild(h),c.appendChild(e),f.className="team unknown",s.textContent="Unclear",f.appendChild(s),i.className="filtered",f.appendChild(i),b.appendChild(f),b},PoliticianView=function(a){var b=$c("div"),c=$c("div"),d=$c("i"),e=$c("button"),f=$c("button"),g=$c("h4"),h=$c("h3"),i=$c("div");if(c.classList.add("headshot"),a.politician.score>=6?b.classList.add("good"):a.politician.score>=0?b.classList.add("neutral"):b.classList.add("bad"),""!=a.politician.image&&d.classList.add("congressional-head",a.politician.image.replace(".jpg","")),c.appendChild(d),b.appendChild(c),g.textContent=a.politician.last_name,b.appendChild(g),a.noGrade||(h.classList.add("grade"),h.textContent=a.politician.grade,b.appendChild(h)),i.classList.add("rollover"),e.classList.add("tweet_link"),i.appendChild(e),f.classList.add("info_link"),f.textContent="i",i.appendChild(f),b.appendChild(i),a.extraInfo){var j=$c("ul");if(j.classList.add("extra_info"),console.log("owl"),a.politician.twitter){var k=$c("li"),l=$c("a");l.classList.add("inline_tweet"),l.href="#",l.textContent="@"+a.politician.twitter,k.appendChild(l),j.appendChild(k)}if(a.politician.phone){var k=$c("li"),l=$c("a");l.href="tel://"+a.politician.phone,l.textContent=a.politician.phone,k.appendChild(l),j.appendChild(k)}b.appendChild(j)}if("all"==a.state||"senate"==a.state||"house"==a.state){var m=$c("div");a.politician.state_short?m.textContent=a.politician.state_short:m.textContent="?",a.politician.score>=6?m.classList.add("good"):a.politician.score>=0?m.classList.add("neutral"):m.classList.add("bad");var n=$c("div");n.className="peekaboo";var o=$c("div");return o.className="politician",o.appendChild(b),n.appendChild(o),m.appendChild(n),m}return b},PoliticianModalView=function(a){var b=$c("div"),c=$c("button"),d=$c("h2"),e=$c("ul");b.classList.add("modal","politician_modal"),c.classList.add("close"),c.textContent="⨉",d.textContent="How "+a.name+" Voted…",b.appendChild(c),b.appendChild(d),console.log(a);for(var f=0;f<a.positions.length;f++){var g=$c("li");if(a.positions[f].score<0?g.className="bad":g.className="good",void 0===a.positions[f].url)g.textContent=a.positions[f].info,e.appendChild(g);else{var h=$c("a");h.href=a.positions[f].url,h.target="_blank",h.textContent=a.positions[f].info,g.appendChild(h),e.appendChild(g)}}return b.appendChild(e),b};if(!util)var util={};util.generateSpinner=function(){var a=$c("div");a.className="spinnerContainer";var b=$c("div");b.className="spinner",a.appendChild(b);for(var c=1;c<=12;c++){var d=$c("div");d.className="blade d"+(c<10?"0"+c:c);var e=$c("div");d.appendChild(e),b.appendChild(d)}return a},util.getReferrerTag=function(){var a=document.referrer;return a.indexOf("facebook.com")!==-1?"from-facebook":a.indexOf("twitter.com")!==-1||a.indexOf("t.co")!==-1?"from-twitter":a.indexOf("reddit.com")!==-1?"from-reddit":window.location.href.indexOf("_src=ga")!==-1?"from-google-adwords":a.indexOf("google.com")!==-1?"from-google":void 0},util.parseQueryString=function(){var a,b,c={},d=window.location.search;for("?"===d[0]&&(d=d.substr(1)),b=d.split("&"),a=b.length;a--;)c[b[a].split("=")[0]]=b[a].split("=")[1];return c};var TWEET_BLASTER_URL="https://tweet-congress.herokuapp.com",SPREADSHEET_URL="https://spreadsheets.google.com/feeds/list/1rTzEY0sEEHvHjZebIogoKO1qfTez2T6xNj0AScO6t24/default/public/values?alt=json",DEFAULT_TWEETS=["Let S. 702 of F.A.A. lapse 12/2017 - NSA & FBI killing our privacy."],STATES={AL:"Alabama",AK:"Alaska",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",FL:"Florida",GA:"Georgia",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"},politicians=new Politicians,unfilteredPoliticians=new Politicians,geocode=null,xhr=new XMLHttpRequest;xhr.onreadystatechange=function(){if(4===xhr.readyState){for(var a=JSON.parse(xhr.response),b=0;b<a.feed.entry.length;b++){var c=a.feed.entry[b],d=new Politician;d.populateFromGoogle(c),"No"!==d.get("active")&&(politicians.add(d),unfilteredPoliticians.add(d))}politicians=new PoliticiansFilter(politicians),checkIfFinishedWithXHRs()}},xhr.open("get",SPREADSHEET_URL,!0),xhr.send();var xhr2=new XMLHttpRequest;xhr2.onreadystatechange=function(){if(4===xhr2.readyState){var a=JSON.parse(xhr2.response);geocode=a,checkIfFinishedWithXHRs()}},xhr2.open("get","https://fftf-geocoder.herokuapp.com",!0),xhr2.send();var checkIfFinishedWithXHRs=function(){politicians.models().length&&geocode&&initializeScoreboard()},renderTopStateSelector=function(){if(document.getElementById("placeholder_state_name")){document.getElementById("placeholder_state_name").style.display="none";var a=$c("select");for(var b in STATES)if(STATES.hasOwnProperty(b)){var c=$c("option");c.textContent=STATES[b],c.value=b,politicians.state==b&&(c.selected=!0),a.appendChild(c)}a.onchange=function(){for(var a=this.options[this.options.selectedIndex].value,b=document.getElementById("_ps_choose_state"),c=0;c<b.options.length;c++)b.options[c].value==a&&(b.options[c].selected=!0);var d=new UIEvent("change",{view:window,bubbles:!0,cancelable:!0});b.dispatchEvent(d),setTimeout(function(){loadTopPoliticiansByState()},10)},a.onclick=function(){document.getElementById("just_state").checked=!0,
handleTweetSelectorLabels()},document.getElementById("state_selector").appendChild(a)}},topPoliticians=[null,null],hasTweeted=!1,generateTweetTextFromTopPoliticians=function(){var a="";return a+=topPoliticians[0].model.get("twitter")?".@"+topPoliticians[0].model.get("twitter")+", ":"Sen. "+topPoliticians[0].model.get("last_name")+", ",a+=topPoliticians[1].model.get("twitter")?"@"+topPoliticians[1].model.get("twitter")+" ":"Sen. "+topPoliticians[1].model.get("last_name")+" ",a+=document.getElementById("tweet_text").value,console.log("tweet:",a),a},loadTopPoliticiansByState=function(){for(var a=politicians.select({organization:"Senate"}),b=0;b<a.length;b++)topPoliticians[b]&&topPoliticians[b].release(),topPoliticians[b]=new PoliticianController({model:a[b],noGrade:!0,extraInfo:!0,inject:"#targets .side"+b})},handleTweetSelectorLabels=function(){document.getElementById("EVERYONE")&&(document.getElementById("EVERYONE").checked?(document.getElementById("EVERYONE_label").className="sel",document.getElementById("just_state_label").className="",document.getElementById("tweet_blaster_frame").style.display="block",document.getElementById("tweet_your_state").style.display="none"):(document.getElementById("EVERYONE_label").className="",document.getElementById("just_state_label").className="sel",document.getElementById("tweet_blaster_frame").style.display="none",document.getElementById("tweet_your_state").style.display="block"))},handleRemainingTweetText=function(){if(document.getElementById("tweet_text")){var a=105-document.getElementById("tweet_text").value.length;document.getElementById("remaining").textContent=a,a<=10?document.getElementById("remaining").className="danger":document.getElementById("remaining").className=""}},initializeScoreboard=function(){if(geocode.subdivisions&&geocode.subdivisions.length&&geocode.subdivisions[0].iso_code&&STATES.hasOwnProperty(geocode.subdivisions[0].iso_code)&&(politicians.state=geocode.subdivisions[0].iso_code),politicians.refresh(),renderTopStateSelector(),loadTopPoliticiansByState(),util.getParameterByName("autotweet")){var a=generateTweetTextFromTopPoliticians();window.location.replace("https://twitter.com/intent/tweet?text="+encodeURIComponent(a))}var b=document.querySelector("#scoreboard_data .spinnerContainer");b&&b.remove(),new PoliticalScoreboardController({collection:politicians,inject:"#scoreboard_data"});var c=util.getParameterByName("politician");if(c){var d=unfilteredPoliticians.select_one({bioguide:c});d&&new PoliticianModalController({model:d}),window.location.replace("#scoreboard")}var e=document.getElementById("nameSearch");e.addEventListener("keyup",filterByPartialName)},filterByPartialName=function(){function a(a,b){if("string"!=typeof a||"string"!=typeof b)throw new Error("Pass two strings!");for(var c=[],d=0;d<=a.length;++d)c[d]=[d];for(var d=0;d<=b.length;++d)c[0][d]=d;for(var e=1;e<=b.length;++e)for(var d=1;d<=a.length;++d)c[d][e]=a[d-1]===b[e-1]?c[d-1][e-1]:Math.min.apply(Math,[c[d-1][e]+1,c[d][e-1]+1,c[d-1][e-1]+1]);return c[a.length][b.length]}for(var b=document.getElementById("nameSearch").value,c=b.toLowerCase().split(" "),d=3,e=[],f=0;f<c.length;f++){var g=c[f];if(!(g.length<3)){var h=unfilteredPoliticians.filter(function(b){var c=b.get("first_name").toLowerCase();if(a(g,c)<d)return!0;if(c.match(g))return!0;var e=b.get("last_name").toLowerCase();return a(g,e)<d||!!e.match(g)});e=e.concat(h)}}console.log(e);for(var i=document.getElementById("nameResults");i.firstChild;)i.removeChild(i.firstChild);for(var j=document.createDocumentFragment(),f=0;f<e.length;f++){var k=document.createElement("div"),l=document.createElement("button"),m=document.createTextNode(e[f].get("first_name")+" "+e[f].get("last_name")+": "+e[f].get("grade")),n=e[f].get("score");n>=6?k.classList.add("good"):n>=0?k.classList.add("neutral"):k.classList.add("bad"),l.appendChild(m);var o=function(a){return function(){new PoliticianModalController({model:a})}}(e[f]);l.addEventListener("click",o);var p=document.createElement("br");k.appendChild(l),j.appendChild(k),j.appendChild(p),j.appendChild(p)}i.appendChild(j)},alreadyBlasted=!1;if(window.onhashchange=function(){"#blast"==window.location.hash&&0==alreadyBlasted&&(document.getElementById("tweet_blaster_frame").src=TWEET_BLASTER_URL+"/blast?tweet="+encodeURIComponent(document.getElementById("tweet_text").value),window.location.hash="#",alreadyBlasted=!0,popCallModal(!0))},!util.getParameterByName("org")){var coinToss=Math.random();coinToss>.1?window.org="fftf":window.org="rt4"}var org=util.getParameterByName("org")||window.org;"rt4"==org?window.DONATE_URL="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=245ZSF2CHHYXN":window.DONATE_URL="https://donate.fightforthefuture.org/?tag=decidethefuture";var popCallModal=function(a){new CallModalController({headline:a?"Thanks for tweeting! Now can you call Congress?":"Can you call Congress to #StopCISA?",campaign:"cisa-cloture-fax",cta:"Congress needs to understand that CISA is a dirty mass surveillance bill that won't protect us from cyber attacks. Enter your phone number and we'll connect you to Congress, or dial 1-985-222-CISA on your phone.",callScript:"Please oppose CISA, the Cybersecurity Information Sharing Act. CISA won't fix the cybersecurity problems we face in the U.S.—it will only lead to more warrantless mass surveillance of millions of Americans. We need real cybersecurity legislation, and it's not CISA.",shareText:"We're up against some of the most powerful corporate lobbyists in the country, but that hasn't stopped us before. If a critical mass of citizens speak out against CISA, our voices will be impossible to ignore."})},onDomContentLoaded=function(){if(0==politicians.models().length){var a=util.generateSpinner();document.getElementById("scoreboard_data")&&document.getElementById("scoreboard_data").appendChild(a)}document.querySelector(".action a.tweet")&&document.querySelector(".action a.tweet").addEventListener("click",function(a){if(a.preventDefault(),!topPoliticians[0])return alert("Hold on, still loading your senators :)");var b=generateTweetTextFromTopPoliticians(),c=window.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(b),"zetsubou_billy","width=500, height=300, toolbar=no, status=no, menubar=no"),d=window.setInterval(function(){c.closed!==!1&&(window.clearInterval(d),0==hasTweeted&&popCallModal(!0),hasTweeted=!0)},200)}),handleTweetSelectorLabels(),document.getElementById("EVERYONE")&&document.getElementById("EVERYONE").addEventListener("change",function(){handleTweetSelectorLabels()}),document.getElementById("just_state")&&document.getElementById("just_state").addEventListener("change",function(){handleTweetSelectorLabels()}),document.getElementById("tweet_text")&&(document.getElementById("tweet_text").addEventListener("change",function(){handleRemainingTweetText()}),document.getElementById("tweet_text").addEventListener("keyup",function(){handleRemainingTweetText()})),document.getElementById("call_congress")&&document.getElementById("call_congress").addEventListener("click",function(a){a.preventDefault(),popCallModal()}),util.getParameterByName("call")&&popCallModal();var b=DEFAULT_TWEETS[Math.floor(Math.random()*DEFAULT_TWEETS.length)];document.getElementById("tweet_text")&&(document.getElementById("tweet_text").value=b),handleRemainingTweetText(),document.getElementById("dumbcalltool")&&document.getElementById("dumbcalltool").addEventListener("submit",function(a){if(a.preventDefault(),!util.validatePhone(document.getElementById("dumbphonenumber").value))return alert("Please enter a valid phone number!"),!1;var b=new FormData;b.append("campaignId","smh"),b.append("org",window.org||"fftf"),b.append("userPhone",util.validatePhone(document.getElementById("dumbphonenumber").value));var c="https://call-congress.fightforthefuture.org/create",d=new XMLHttpRequest;return d.onreadystatechange=function(){4===d.readyState&&console.log("sent!",d.response)}.bind(this),d.open("post",c,!0),d.send(b),new CallScriptModalController({callHeadline:"Awesome! We're calling your phone!",callInstruction:"Please be polite and tell your lawmaker:",callScript:"Please stop the dangerous Rule 41 change and refuse to expand surveillance powers. Vote to pass the Stop Mass Hacking Act."}),!1}),function(a,b){"use strict";function c(b){b.preventDefault(),console.log("derp");var c=b.target.getAttribute("href").replace(/#/,"");a.getElementById(c).classList.add("expanded")}var d=a.getElementsByClassName("expand-me"),e=d.length;if(a.getElementById("scoreboard_corporate")){var f,g,h,i=a.getElementById("scoreboard_corporate").getElementsByTagName("table");for(f=i.length;f--;)for(h=i[f].getElementsByTagName("a"),g=h.length;g--;)h[g].addEventListener("click",function(a){a.preventDefault()})}for(;e--;)d[e].addEventListener("click",c);document.getElementById("petition-form")&&b.components.petitions(a,b),document.getElementById("whiplist")&&b.components.whiplist(a,b)}(document,window)};"complete"==document.readyState||"loaded"==document.readyState||"interactive"==document.readyState?onDomContentLoaded():document.addEventListener&&document.addEventListener("DOMContentLoaded",onDomContentLoaded,!1),function(a,b){"use strict";b.callbacks=b.callbacks||{},b.callbacks.petitions={preSubmit:function(){document.body.querySelector('[type="submit"]').disabled=!0},loadSignatureResponse:function(a){var b=a.target;if(b.status>=200&&b.status<400){var c=document.getElementById("petition-form"),d=document.getElementById("thanks");document.getElementById("form-headline").classList.add("hidden"),d.classList.remove("hidden"),c.removeAttribute("style"),c.innerHTML="",c.appendChild(d)}else handleSigningError(b)},handleSigningError:function(a){document.body.querySelector('[type="submit"]').disabled=!1,console.log("AN ERROR OCCURRED WHILE SENDING YOUR PETITION: ",a),alert("AN ERROR OCCURRED WHILE SENDING YOUR PETITION")}}}(document,window);
//# sourceMappingURL=core.js.map